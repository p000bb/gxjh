/* empty css             */import{E as B}from"./el-overlay-1dc85f1f.js";import{E as C}from"./el-button-4e36e058.js";/* empty css                */import{E as D,a as N}from"./el-col-8e530667.js";import{E as U}from"./el-input-number-f0790d3e.js";import{E as z}from"./el-input-7ff3e30e.js";import{E as L,a as R}from"./el-form-item-ef0a5188.js";import"./el-tag-e05e313c.js";import"./el-select-7c2b4cfc.js";import"./el-scrollbar-874a5079.js";import"./el-popper-bf9c0fd5.js";import{E as Z}from"./el-tree-select-843cadf2.js";/* empty css                    */import{u as q,b as F,c as P,a as S}from"./index-356d3bb1.js";import{a as $}from"./index-7a6f10c9.js";import{G}from"./user-89041d09.js";import{d as M,r as n,y as O,x as j,B as t,E as H,k as e,ag as _}from"./viewer-a917d3a0.js";const J={class:"dialog-footer"},fe=M({__name:"dataDialog",emits:["getPageList"],setup(K,{expose:g,emit:v}){const E=v,i=n(),s=n(!1),p=n(),l=n({}),d=n([]),V=n({name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"change"}],email:[{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,message:"请输入正确的邮箱",trigger:"change"}]}),b=()=>{s.value=!1},k=()=>{var o;(o=p.value)==null||o.validate(async a=>{a&&(l.value.id?await q(l.value):await F(l.value),s.value=!1,G.success("操作成功"),E("getPageList"))})},y=async o=>{if(w(),o!=null&&o.id){const a=await P(o.id);l.value={...a.data},i.value="修改图册",s.value=!0}else l.value={parentId:o==null?void 0:o.parentId},i.value="新增图册",s.value=!0},w=async()=>{const o=await S({pageNum:1,pageSize:1e3});d.value=$([...o.data.list,{id:"0",name:"根"}])||[]};return g({openDialog:y}),(o,a)=>{const x=Z,u=L,m=D,c=z,I=U,A=N,h=R,f=C,T=B;return O(),j(T,{title:i.value,modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=r=>s.value=r),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[H("div",J,[e(f,{onClick:b},{default:t(()=>[_("取 消")]),_:1}),e(f,{type:"primary",onClick:k},{default:t(()=>[_("保 存")]),_:1})])]),default:t(()=>[e(h,{ref_key:"formRef",ref:p,model:l.value,rules:V.value,"label-width":"auto"},{default:t(()=>[e(A,null,{default:t(()=>[e(m,{span:24},{default:t(()=>[e(u,{label:"上级图册：",prop:"parentId"},{default:t(()=>[e(x,{modelValue:l.value.parentId,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value.parentId=r),data:d.value,props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"选择上级图册","check-strictly":"",filterable:"","render-after-expand":!1,class:"w-full"},null,8,["modelValue","data"])]),_:1})]),_:1}),e(m,{span:12},{default:t(()=>[e(u,{label:"图册名称：",prop:"name"},{default:t(()=>[e(c,{modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value.name=r),placeholder:"请输入图册名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:t(()=>[e(u,{label:"排序：",prop:"sort"},{default:t(()=>[e(I,{modelValue:l.value.sort,"onUpdate:modelValue":a[2]||(a[2]=r=>l.value.sort=r),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:24},{default:t(()=>[e(u,{label:"备注：",prop:"remark"},{default:t(()=>[e(c,{modelValue:l.value.remark,"onUpdate:modelValue":a[3]||(a[3]=r=>l.value.remark=r),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{fe as _};
