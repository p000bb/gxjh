import{L as U}from"./el-button-534f93ec.js";/* empty css                   */import{E as F,a as M}from"./el-col-af40c86f.js";/* empty css                */import{d as $,f as q,n as O,o as Q}from"./admin-d15e446e.js";import{E as p,a as A}from"./el-link-b795f2cd.js";import{d as j,b8 as G,r as l,k as a,ay as d,F as H,o as J,v as u,y as K,A as X,E as c,B as i,C as _,D as h,I as Y}from"./viewer-71a6cc7b.js";import{d as Z,g as ee}from"./index-0df10c68.js";import{g as ae}from"./index-609ba817.js";import{a as te}from"./index-b7dce1f7.js";import{L as oe}from"./index-e9e802b0.js";import{v as le}from"./directive-44e37452.js";import"./el-popper-5f9a363e.js";import"./debounce-e240d589.js";import"./index-07157569.js";import"./vnode-d45677e0.js";import"./aria-bc8e8b0f.js";import"./service copy-fb1d097e.js";import"./index-c21c62e8.js";import"./index-b59c1af4.js";const ne={class:"container-main flex"},re={class:"w-[250px] left-tree"},ie={style:{width:"calc(100% - 270px)"}},se={class:"table-main"},Re=j({__name:"index",setup(me){const f=G(),o=l({pageNum:1,pageSize:10}),y=l(!0),s=l(!1),g=l([]),m=l(0),w=()=>{o.value={pageNum:1,pageSize:10},n()},b=()=>{n()},n=async()=>{s.value=!0,ee(o.value).then(e=>{g.value=e.data.list||[],m.value=parseInt(e.data.total),s.value=!1})},E=l([{label:"视频名称",prop:"name",minWidth:120},{label:"视频路径",prop:"path",minWidth:250,showOverflowTooltip:!1,render:e=>a(p,{type:"primary",href:{}.VITE_PREVIEW_URL+e.row.path,target:"_blank"},{default:()=>[{}.VITE_PREVIEW_URL+e.row.path]})},{label:"创建时间",prop:"createTime",minWidth:180},{label:"视频种类",prop:"type",minWidth:120},{label:"文件类别",prop:"category.name",minWidth:120,render:e=>{var t;return(t=e.row.category)==null?void 0:t.name},show:()=>!o.value.categoryId},{label:"视频封面",prop:"preview",minWidth:150,fixed:"right",showOverflowTooltip:!1,render:e=>a("img",{style:"height: 100px",src:{}.VITE_PREVIEW_URL+e.row.cover+`?name=${e.row.name}&size=${e.row.size}`},null)},{label:"操作",prop:"option",fixed:"right",width:150,render:e=>a(H,null,[a(p,{class:"table_link_btn",underline:!1,size:"small",type:"primary",icon:"Edit",onClick:()=>x(e.row)},{default:()=>[a("span",{class:"table_link_text"},[d("修改")])]}),a(p,{class:"table_link_btn",underline:!1,size:"small",type:"danger",icon:"Remove",onClick:()=>T(e.row)},{default:()=>[a("span",{class:"table_link_text"},[d("删除")])]})])}]),k=()=>{f.push({path:"/file/video/manage"})},x=e=>{f.push({path:"/file/video/manage",query:{id:e.id}})},T=({id:e})=>{A.confirm("是否删除该条数据",{title:"警告",type:"warning"}).then(()=>{Z(e).then(t=>{t.code===0&&($.success("删除成功"),n())})})},v=l([]),V=async()=>{const e=await ae({pageNum:1,pageSize:1e3});v.value=te([...e.data.list,{id:"0",name:"文件种类"}])||[]},I=e=>{e.id!=="0"?o.value.categoryId=e.id:o.value.categoryId=void 0,n()};return J(()=>{n(),V()}),(e,t)=>{const C=q,L=O,R=u("form-search"),z=Q,N=U,W=F,D=M,S=u("Table"),B=u("pagination"),P=le;return K(),X("div",ne,[c("div",re,[a(oe,{onNodeClick:I,data:v.value,"expand-on-click-node":!1,"node-key":"id","current-node-key":"0","default-expand-all":""},null,8,["data"])]),c("div",ie,[a(Y,{name:"fade"},{default:i(()=>[_(a(z,{model:o.value,inline:!0,"label-width":"auto",class:"search-form"},{default:i(()=>[a(L,{label:"名称",prop:"name"},{default:i(()=>[a(C,{modelValue:o.value.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.value.name=r),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),a(R,{onReset:w,onSearch:b})]),_:1},8,["model"]),[[h,y.value]])]),_:1}),c("div",se,[a(D,{gutter:10,class:"mb8"},{default:i(()=>[a(W,{span:1.5},{default:i(()=>[a(N,{type:"primary",plain:"",icon:"plus",size:"small",onClick:t[1]||(t[1]=r=>k())},{default:i(()=>[d("新增")]),_:1})]),_:1})]),_:1}),_(a(S,{data:g.value,"row-key":"id",columns:E.value,ref:"multipleTableRef"},null,8,["data","columns"]),[[P,s.value]]),_(a(B,{total:m.value,page:o.value.pageNum,"onUpdate:page":t[2]||(t[2]=r=>o.value.pageNum=r),limit:o.value.pageSize,"onUpdate:limit":t[3]||(t[3]=r=>o.value.pageSize=r),onPagination:n},null,8,["total","page","limit"]),[[h,m.value>0]])])])])}}});export{Re as default};
