import{L as W}from"./el-button-534f93ec.js";/* empty css                   */import{E as $}from"./el-overlay-56edc591.js";import{E as j,a as G}from"./el-tab-pane-4dd720c9.js";/* empty css                */import{d as H,f as J,n as K,o as X}from"./admin-d15e446e.js";import{d as Y,r as s,o as Z,v as E,y as r,x as ee,B as n,E as f,k as t,ay as V,C as w,A as m,F as ae,aQ as oe,M as le,L as C,az as te,D as se,b6 as ne}from"./viewer-71a6cc7b.js";import{g as ie}from"./index-d8f03a14.js";import{g as re}from"./index-0df10c68.js";import{v as ce}from"./directive-44e37452.js";import"./index-07157569.js";import"./el-popper-5f9a363e.js";import"./vnode-d45677e0.js";import"./refs-45d3232c.js";import"./index-58ca3b32.js";import"./debounce-e240d589.js";import"./service copy-fb1d097e.js";const me={class:"table-main w-full"},ue={class:"grid grid-cols-4 gap-10 place-items-center w-full max-h-[500px] overflow-y-auto overflow-x-hidden","element-loading-background":"#fff","element-loading-text":"加载中！"},pe=["onClick"],de=["src"],_e=["src"],ve={class:"text-center font-black line-clamp-1"},fe={class:"dialog-footer"},ge=Y({__name:"fileDialog",emits:["confirm"],setup(be,{expose:D,emit:L}){const i=s(0),N=L,g=s(""),c=s(!1),b={}.VITE_PREVIEW_URL,p=s(!1),y=s([]),l=s({pageNum:1,pageSize:10}),d=s(0),_=()=>{l.value={pageNum:1,pageSize:10},v()},S=()=>{v()},v=async()=>{p.value=!0;let a={};i.value===0?a=await ie(l.value):a=await re(l.value),y.value=a.data.list||[],d.value=parseInt(a.data.total),p.value=!1},T=a=>{i.value=a.props.name,_()},U=()=>{c.value=!1},u=s({}),k=(a,o)=>{u.value={id:a.id,fileType:o||0}},z=()=>{if(!u.value.id)return H.error("请选择素材");c.value=!1,N("confirm",u.value)},B=async(a,o=0)=>{a!=null&&a.id&&k(a,o),_(),g.value="选择素材",c.value=!0};return Z(()=>{}),D({openDialog:B}),(a,o)=>{const F=J,I=K,P=E("form-search"),M=X,x=j,Q=G,R=E("pagination"),h=W,q=$,A=ce;return r(),ee(q,{title:g.value,modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=e=>c.value=e),width:"1100px","close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[f("div",fe,[t(h,{onClick:U},{default:n(()=>[V("关 闭")]),_:1}),t(h,{type:"primary",onClick:z},{default:n(()=>[V("确 定")]),_:1})])]),default:n(()=>[t(M,{model:l.value,inline:!0,"label-width":"auto",class:"search-form"},{default:n(()=>[t(I,{label:"文件名称",prop:"name"},{default:n(()=>[t(F,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.name=e),placeholder:"请输入文件名称",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{onReset:_,onSearch:S})]),_:1},8,["model"]),t(Q,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),class:"demo-tabs",onTabClick:T},{default:n(()=>[t(x,{label:"图片素材",name:0}),t(x,{label:"视频素材",name:1})]),_:1},8,["modelValue"]),f("div",me,[w((r(),m("div",ue,[(r(!0),m(ae,null,oe(y.value,(e,O)=>(r(),m("div",{key:O,class:le(["img-item",{"active-img":u.value.id===e.id}]),onClick:ye=>k(e,i.value)},[i.value===0?(r(),m("img",{key:0,src:C(b)+e.path,class:"w-[178px]"},null,8,de)):(r(),m("img",{key:1,src:C(b)+e.cover,class:"w-[178px]"},null,8,_e)),f("p",ve,te(e.name),1)],10,pe))),128))])),[[A,p.value]]),w(t(R,{total:d.value,page:l.value.pageNum,"onUpdate:page":o[2]||(o[2]=e=>l.value.pageNum=e),limit:l.value.pageSize,"onUpdate:limit":o[3]||(o[3]=e=>l.value.pageSize=e),onPagination:v},null,8,["total","page","limit"]),[[se,d.value>0]])])]),_:1},8,["title","modelValue"])}}});const Pe=ne(ge,[["__scopeId","data-v-a9b30c3b"]]);export{Pe as default};
