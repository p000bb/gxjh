/* empty css             *//* empty css                   */import{E as M,a as P}from"./el-col-8e530667.js";import{E as U}from"./el-button-4e36e058.js";/* empty css                */import{E as $,a as j}from"./el-form-item-ef0a5188.js";import{E as q}from"./el-input-7ff3e30e.js";import{E as p}from"./el-link-280dfa75.js";import{d as O,ar as Q,r as l,k as t,ag as d,F as A,o as G,v as u,y as H,A as J,E as c,B as i,C as f,D as h,I as K}from"./viewer-a917d3a0.js";import{d as X,g as Y}from"./index-935e8e0f.js";import{g as Z}from"./index-39e0cb16.js";import{a as ee}from"./index-7a6f10c9.js";import{L as te}from"./index-3a29fc2a.js";import{E as ae}from"./index-a9e8e7e8.js";import{G as oe}from"./user-89041d09.js";import{v as le}from"./directive-39134a76.js";import"./use-form-item-a4463e9d.js";import"./use-form-common-props-ac54b10b.js";import"./index-cb7b6eb7.js";import"./castArray-4f8be612.js";import"./error-f1912ce6.js";import"./_baseClone-45ade047.js";import"./_getTag-fe0ae1ad.js";import"./index-04713145.js";import"./index-bd5a7bea.js";import"./index-0e87bdd6.js";import"./isEqual-f03edc0e.js";import"./hasIn-03b841fc.js";import"./flatten-79638cde.js";import"./index-31848957.js";import"./scroll-77ba8cf1.js";import"./vnode-37301cb0.js";import"./aria-bc8e8b0f.js";import"./focus-trap-c1ca97d6.js";import"./validator-41f192c7.js";const ne={class:"container-main flex"},re={class:"w-[250px] left-tree"},ie={style:{width:"calc(100% - 270px)"}},se={class:"table-main"},Qe=O({__name:"index",setup(me){const _=Q(),o=l({pageNum:1,pageSize:10}),y=l(!0),s=l(!1),g=l([]),m=l(0),w=()=>{o.value={pageNum:1,pageSize:10},n()},b=()=>{n()},n=async()=>{s.value=!0,Y(o.value).then(e=>{g.value=e.data.list||[],m.value=parseInt(e.data.total),s.value=!1})},E=l([{label:"视频名称",prop:"name",minWidth:120},{label:"视频路径",prop:"path",minWidth:250,showOverflowTooltip:!1,render:e=>t(p,{type:"primary",href:"https://120.27.223.237/gxjh-file/"+e.row.path,target:"_blank"},{default:()=>[e.row.path]})},{label:"创建时间",prop:"createTime",minWidth:180},{label:"视频种类",prop:"type",minWidth:120},{label:"文件类别",prop:"category.name",minWidth:120,render:e=>{var a;return(a=e.row.category)==null?void 0:a.name},show:()=>!o.value.categoryId},{label:"视频封面",prop:"preview",minWidth:150,fixed:"right",showOverflowTooltip:!1,render:e=>t("img",{style:"height: 100px",src:"https://120.27.223.237/gxjh-file/"+e.row.cover+`?name=${e.row.name}&size=${e.row.size}`},null)},{label:"操作",prop:"option",fixed:"right",width:150,render:e=>t(A,null,[t(p,{class:"table_link_btn",underline:!1,size:"small",type:"primary",icon:"Edit",onClick:()=>x(e.row)},{default:()=>[t("span",{class:"table_link_text"},[d("修改")])]}),t(p,{class:"table_link_btn",underline:!1,size:"small",type:"danger",icon:"Remove",onClick:()=>T(e.row)},{default:()=>[t("span",{class:"table_link_text"},[d("删除")])]})])}]),k=()=>{_.push({path:"/file/video/manage"})},x=e=>{_.push({path:"/file/video/manage",query:{id:e.id}})},T=({id:e})=>{ae.confirm("是否删除该条数据",{title:"警告",type:"warning"}).then(()=>{X(e).then(a=>{a.code===0&&(oe.success("删除成功"),n())})})},v=l([]),C=async()=>{const e=await Z({pageNum:1,pageSize:1e3});v.value=ee([...e.data.list,{id:"0",name:"文件种类"}])||[]},z=e=>{e.id!=="0"?o.value.categoryId=e.id:o.value.categoryId=void 0,n()};return G(()=>{n(),C()}),(e,a)=>{const N=q,D=$,S=u("form-search"),V=j,I=U,L=M,B=P,W=u("Table"),F=u("pagination"),R=le;return H(),J("div",ne,[c("div",re,[t(te,{onNodeClick:z,data:v.value,"expand-on-click-node":!1,"node-key":"id","current-node-key":"0","default-expand-all":""},null,8,["data"])]),c("div",ie,[t(K,{name:"fade"},{default:i(()=>[f(t(V,{model:o.value,inline:!0,"label-width":"auto",class:"search-form"},{default:i(()=>[t(D,{label:"名称",prop:"name"},{default:i(()=>[t(N,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value.name=r),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),t(S,{onReset:w,onSearch:b})]),_:1},8,["model"]),[[h,y.value]])]),_:1}),c("div",se,[t(B,{gutter:10,class:"mb8"},{default:i(()=>[t(L,{span:1.5},{default:i(()=>[t(I,{type:"primary",plain:"",icon:"plus",size:"small",onClick:a[1]||(a[1]=r=>k())},{default:i(()=>[d("新增")]),_:1})]),_:1})]),_:1}),f(t(W,{data:g.value,"row-key":"id",columns:E.value,ref:"multipleTableRef"},null,8,["data","columns"]),[[R,s.value]]),f(t(F,{total:m.value,page:o.value.pageNum,"onUpdate:page":a[2]||(a[2]=r=>o.value.pageNum=r),limit:o.value.pageSize,"onUpdate:limit":a[3]||(a[3]=r=>o.value.pageSize=r),onPagination:n},null,8,["total","page","limit"]),[[h,m.value>0]])])])])}}});export{Qe as default};
