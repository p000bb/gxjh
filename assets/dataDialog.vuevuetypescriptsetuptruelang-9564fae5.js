import{L as h}from"./el-button-534f93ec.js";import{E as B}from"./el-overlay-56edc591.js";/* empty css                */import{E as C,a as N}from"./el-col-af40c86f.js";import{E as z}from"./el-input-number-9046f3aa.js";import{d as L,n as A,f as R,o as Z}from"./admin-d15e446e.js";import"./el-popper-5f9a363e.js";import{E as q}from"./el-tree-select-4038975f.js";import{u as F,a as P,b as S,g as $}from"./index-71e570d3.js";import{a as M}from"./index-b7dce1f7.js";import{d as O,r as m,y as j,x as G,B as o,E as H,k as e,ay as c}from"./viewer-71a6cc7b.js";const J={class:"dialog-footer"},se=O({__name:"dataDialog",emits:["getPageList"],setup(K,{expose:v,emit:g}){const V=g,d=m(),n=m(!1),i=m(),l=m({}),f=m([]),b=m({name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,message:"请输入正确的邮箱",trigger:"blur"}]}),E=()=>{n.value=!1},y=()=>{var t;(t=i.value)==null||t.validate(async a=>{a&&(l.value.id?await F(l.value):await P(l.value),n.value=!1,L.success("操作成功"),V("getPageList"))})},k=async t=>{if(w(),t!=null&&t.id){const a=await S(t.id);l.value={...a.data},d.value="修改部门",n.value=!0}else l.value={parentId:t==null?void 0:t.parentId},d.value="新增部门",n.value=!0},w=async()=>{const t=await $({pageNum:1,pageSize:1e3});f.value=M([...t.data.list,{id:"0",name:"根"}])||[]};return v({openDialog:k}),(t,a)=>{const D=q,s=A,u=C,p=R,x=z,I=N,U=Z,_=h,T=B;return j(),G(T,{title:d.value,modelValue:n.value,"onUpdate:modelValue":a[6]||(a[6]=r=>n.value=r),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[H("div",J,[e(_,{onClick:E},{default:o(()=>[c("取 消")]),_:1}),e(_,{type:"primary",onClick:y},{default:o(()=>[c("保 存")]),_:1})])]),default:o(()=>[e(U,{ref_key:"formRef",ref:i,model:l.value,rules:b.value,"label-width":"auto"},{default:o(()=>[e(I,null,{default:o(()=>[e(u,{span:24},{default:o(()=>[e(s,{label:"上级部门：",prop:"parentId"},{default:o(()=>[e(D,{modelValue:l.value.parentId,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value.parentId=r),data:f.value,props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"选择上级部门","check-strictly":"",filterable:"","render-after-expand":!1,class:"w-full"},null,8,["modelValue","data"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(s,{label:"部门名称：",prop:"name"},{default:o(()=>[e(p,{modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value.name=r),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(s,{label:"排序：",prop:"sort"},{default:o(()=>[e(x,{modelValue:l.value.sort,"onUpdate:modelValue":a[2]||(a[2]=r=>l.value.sort=r),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(s,{label:"电话号码：",prop:"phone"},{default:o(()=>[e(p,{modelValue:l.value.phone,"onUpdate:modelValue":a[3]||(a[3]=r=>l.value.phone=r),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(s,{label:"邮箱：",prop:"email"},{default:o(()=>[e(p,{modelValue:l.value.email,"onUpdate:modelValue":a[4]||(a[4]=r=>l.value.email=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:o(()=>[e(s,{label:"备注：",prop:"remark"},{default:o(()=>[e(p,{modelValue:l.value.remark,"onUpdate:modelValue":a[5]||(a[5]=r=>l.value.remark=r),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{se as _};
