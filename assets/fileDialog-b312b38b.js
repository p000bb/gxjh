import{K as O}from"./el-button-fb691484.js";/* empty css                   */import{E as R}from"./el-overlay-9e31ebb7.js";import{E as $,a as G}from"./el-tab-pane-19a2d70d.js";/* empty css                */import{d as H,f as J,j as W,k as X}from"./admin-ee59f3a1.js";import{d as Y,r as s,o as Z,v as w,y as r,x as ee,B as n,E as f,k as t,ay as V,C as E,A as m,F as ae,aQ as oe,M as le,L as C,az as te,D as se,b6 as ne}from"./viewer-97ef37b1.js";import{g as ie}from"./index-15cc5994.js";import{g as re}from"./index-91087f1d.js";import{v as ce}from"./directive-2e4aa6c9.js";import"./index-aec40419.js";import"./el-popper-17f91b7a.js";import"./vnode-3a581f43.js";import"./refs-03c5e3c6.js";import"./index-59f4a993.js";import"./debounce-38c8536c.js";const me={class:"table-main w-full"},ue={class:"grid grid-cols-4 gap-10 place-items-center w-full max-h-[500px] overflow-y-auto overflow-x-hidden","element-loading-background":"#fff","element-loading-text":"加载中！"},pe=["onClick"],de=["src"],_e=["src"],ve={class:"text-center font-black line-clamp-1"},fe={class:"dialog-footer"},ge=Y({__name:"fileDialog",emits:["confirm"],setup(be,{expose:D,emit:N}){const i=s(0),S=N,g=s(""),c=s(!1),b="https://120.27.223.237/gxjh-file",p=s(!1),y=s([]),l=s({pageNum:1,pageSize:10}),d=s(0),_=()=>{l.value={pageNum:1,pageSize:10},v()},z=()=>{v()},v=async()=>{p.value=!0;let a={};i.value===0?a=await ie(l.value):a=await re(l.value),y.value=a.data.list||[],d.value=parseInt(a.data.total),p.value=!1},B=a=>{i.value=a.props.name,_()},F=()=>{c.value=!1},u=s({}),h=(a,o)=>{u.value={id:a.id,fileType:o||0}},L=()=>{if(!u.value.id)return H.error("请选择素材");c.value=!1,S("confirm",u.value)},T=async(a,o=0)=>{a!=null&&a.id&&h(a,o),_(),g.value="选择素材",c.value=!0};return Z(()=>{}),D({openDialog:T}),(a,o)=>{const U=J,P=W,I=w("form-search"),M=X,k=$,Q=G,j=w("pagination"),x=O,q=R,A=ce;return r(),ee(q,{title:g.value,modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=e=>c.value=e),width:"1100px","close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[f("div",fe,[t(x,{onClick:F},{default:n(()=>[V("关 闭")]),_:1}),t(x,{type:"primary",onClick:L},{default:n(()=>[V("确 定")]),_:1})])]),default:n(()=>[t(M,{model:l.value,inline:!0,"label-width":"auto",class:"search-form"},{default:n(()=>[t(P,{label:"文件名称",prop:"name"},{default:n(()=>[t(U,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.name=e),placeholder:"请输入文件名称",clearable:""},null,8,["modelValue"])]),_:1}),t(I,{onReset:_,onSearch:z})]),_:1},8,["model"]),t(Q,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),class:"demo-tabs",onTabClick:B},{default:n(()=>[t(k,{label:"图片素材",name:0}),t(k,{label:"视频素材",name:1})]),_:1},8,["modelValue"]),f("div",me,[E((r(),m("div",ue,[(r(!0),m(ae,null,oe(y.value,(e,K)=>(r(),m("div",{key:K,class:le(["img-item",{"active-img":u.value.id===e.id}]),onClick:ye=>h(e,i.value)},[i.value===0?(r(),m("img",{key:0,src:C(b)+e.path,class:"w-[178px]"},null,8,de)):(r(),m("img",{key:1,src:C(b)+e.cover,class:"w-[178px]"},null,8,_e)),f("p",ve,te(e.name),1)],10,pe))),128))])),[[A,p.value]]),E(t(j,{total:d.value,page:l.value.pageNum,"onUpdate:page":o[2]||(o[2]=e=>l.value.pageNum=e),limit:l.value.pageSize,"onUpdate:limit":o[3]||(o[3]=e=>l.value.pageSize=e),onPagination:v},null,8,["total","page","limit"]),[[se,d.value>0]])])]),_:1},8,["title","modelValue"])}}});const Pe=ne(ge,[["__scopeId","data-v-a9b30c3b"]]);export{Pe as default};
