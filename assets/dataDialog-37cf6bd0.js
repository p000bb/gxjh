/* empty css             */import{E as A}from"./el-overlay-b9b364f0.js";import{E as S}from"./el-button-b054d70c.js";/* empty css                */import{E as F,a as O}from"./el-col-c5c2ade1.js";/* empty css                    */import{E as P,a as q}from"./el-form-item-c56bbdeb.js";import{E as z}from"./el-input-351b3524.js";import{u as G,a as H,b as $}from"./index-b53b12f3.js";import{g as j}from"./index-89576dc5.js";import{a as J}from"./index-a88dba86.js";import{E as Q}from"./index-4af75670.js";import{G as W}from"./user-9279ed61.js";import{E as X}from"./index-a4449389.js";import{d as Y,r,o as Z,y as ee,x as te,B as a,E as oe,k as l,ag as p,O as le,ac as ae,g as se,ap as ne}from"./viewer-a917d3a0.js";import"./index-09bc554b.js";import"./error-f1912ce6.js";import"./scroll-77ba8cf1.js";import"./vnode-37301cb0.js";import"./focus-trap-f79590ca.js";import"./refs-3c71427a.js";import"./index-9899f039.js";import"./use-form-item-a2dc758c.js";import"./use-form-common-props-957cc35c.js";import"./castArray-4f8be612.js";import"./_baseClone-be1d75cf.js";import"./_getTag-fe467e82.js";import"./index-e005e917.js";import"./isEqual-7c3b890c.js";import"./hasIn-246c5c0e.js";import"./flatten-af461ab7.js";const re={class:"dialog-footer"},ue=Y({__name:"dataDialog",emits:["getPageList"],setup(me,{expose:E,emit:V}){const{proxy:h}=se(),x=V,f=r(),m=r(!1),g=r(),s=r({}),b=r({name:[{required:!0,message:"请输入角色名称",trigger:"change"}]}),w=()=>{m.value=!1},T=()=>{var t;(t=g.value)==null||t.validate(async e=>{e&&(s.value.menuIds=U(),s.value.id?await G(s.value):await H(s.value),m.value=!1,W.success("操作成功"),x("getPageList"))})},R=async t=>{if(t!=null&&t.id){const e=await $(t.id);s.value={...e.data},f.value="修改角色",m.value=!0,e.data.menuIds.forEach(u=>{ae(()=>{var d;(d=i.value)==null||d.setChecked(u,!0,!1)})})}else s.value={state:0},f.value="新增角色",m.value=!0},c=r([]),I=async()=>{const t=await j({pageNum:1,pageSize:1e3});c.value=J(t.data.list)||[]},k=r(),y=r(!1),_=r(!0),i=r(),D=t=>{let e=c.value;for(let n=0;n<e.length;n++)h.$refs.menuRef.store.nodesMap[e[n].id].expanded=t},N=t=>{var e;(e=i.value)==null||e.setCheckedNodes(t?c.value:[])},M=t=>{s.value.menuCheckStrictly=!!t},U=()=>{var n,u;let t=(n=i.value)==null?void 0:n.getCheckedKeys(),e=(u=i.value)==null?void 0:u.getHalfCheckedKeys();return t.unshift.apply(t,e),t};return Z(()=>{I()}),E({openDialog:R}),(t,e)=>{const n=z,u=P,d=F,v=X,B=O,K=q,C=S,L=A;return ee(),te(L,{title:f.value,modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=o=>m.value=o),width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[oe("div",re,[l(C,{onClick:w},{default:a(()=>[p("取 消")]),_:1}),l(C,{type:"primary",onClick:T},{default:a(()=>[p("保 存")]),_:1})])]),default:a(()=>[l(K,{ref_key:"formRef",ref:g,model:s.value,rules:b.value,"label-width":"auto"},{default:a(()=>[l(B,{gutter:40},{default:a(()=>[l(d,{span:12},{default:a(()=>[l(u,{label:"角色名称：",prop:"name"},{default:a(()=>[l(n,{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:24},{default:a(()=>[l(u,{label:"菜单权限："},{default:a(()=>[l(v,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=o=>k.value=o),onChange:e[2]||(e[2]=o=>D(o))},{default:a(()=>[p("展开/折叠")]),_:1},8,["modelValue"]),l(v,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=o=>y.value=o),onChange:e[4]||(e[4]=o=>N(o))},{default:a(()=>[p("全选/全不选")]),_:1},8,["modelValue"]),l(v,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),onChange:e[6]||(e[6]=o=>M(o))},{default:a(()=>[p("父子联动")]),_:1},8,["modelValue"]),l(le(Q),{class:"tree-border",data:c.value,"show-checkbox":"",ref_key:"menuRef",ref:i,"node-key":"id","check-strictly":!_.value,"empty-text":"加载中，请稍后",props:{label:"name",children:"children"}},null,8,["data","check-strictly"])]),_:1})]),_:1}),l(d,{span:24},{default:a(()=>[l(u,{label:"备注：",prop:"remark"},{default:a(()=>[l(n,{type:"textarea",modelValue:s.value.remark,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.remark=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});const Pe=ne(ue,[["__scopeId","data-v-c26d01d1"]]);export{Pe as default};
