import{K as h}from"./el-button-fb691484.js";import{E as B}from"./el-overlay-9e31ebb7.js";/* empty css                */import{E as C,a as N}from"./el-col-2760619c.js";import{E as z}from"./el-input-number-aa0bf63c.js";import{d as A,j as L,f as R,k as Z}from"./admin-ee59f3a1.js";import"./el-popper-17f91b7a.js";import{E as q}from"./el-tree-select-04f4c75d.js";import{u as F,a as P,b as S,g as $}from"./index-1514aabe.js";import{a as j}from"./index-70f8277e.js";import{d as K,r as m,y as M,x as O,B as o,E as G,k as e,ay as c}from"./viewer-97ef37b1.js";const H={class:"dialog-footer"},ne=K({__name:"dataDialog",emits:["getPageList"],setup(J,{expose:v,emit:g}){const V=g,d=m(),s=m(!1),i=m(),l=m({}),f=m([]),b=m({name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,message:"请输入正确的邮箱",trigger:"blur"}]}),E=()=>{s.value=!1},k=()=>{var t;(t=i.value)==null||t.validate(async a=>{a&&(l.value.id?await F(l.value):await P(l.value),s.value=!1,A.success("操作成功"),V("getPageList"))})},y=async t=>{if(w(),t!=null&&t.id){const a=await S(t.id);l.value={...a.data},d.value="修改部门",s.value=!0}else l.value={parentId:t==null?void 0:t.parentId},d.value="新增部门",s.value=!0},w=async()=>{const t=await $({pageNum:1,pageSize:1e3});f.value=j([...t.data.list,{id:"0",name:"根"}])||[]};return v({openDialog:y}),(t,a)=>{const D=q,n=L,u=C,p=R,x=z,I=N,U=Z,_=h,T=B;return M(),O(T,{title:d.value,modelValue:s.value,"onUpdate:modelValue":a[6]||(a[6]=r=>s.value=r),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[G("div",H,[e(_,{onClick:E},{default:o(()=>[c("取 消")]),_:1}),e(_,{type:"primary",onClick:k},{default:o(()=>[c("保 存")]),_:1})])]),default:o(()=>[e(U,{ref_key:"formRef",ref:i,model:l.value,rules:b.value,"label-width":"auto"},{default:o(()=>[e(I,null,{default:o(()=>[e(u,{span:24},{default:o(()=>[e(n,{label:"上级部门：",prop:"parentId"},{default:o(()=>[e(D,{modelValue:l.value.parentId,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value.parentId=r),data:f.value,props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"选择上级部门","check-strictly":"",filterable:"","render-after-expand":!1,class:"w-full"},null,8,["modelValue","data"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(n,{label:"部门名称：",prop:"name"},{default:o(()=>[e(p,{modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value.name=r),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(n,{label:"排序：",prop:"sort"},{default:o(()=>[e(x,{modelValue:l.value.sort,"onUpdate:modelValue":a[2]||(a[2]=r=>l.value.sort=r),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(n,{label:"电话号码：",prop:"phone"},{default:o(()=>[e(p,{modelValue:l.value.phone,"onUpdate:modelValue":a[3]||(a[3]=r=>l.value.phone=r),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:o(()=>[e(n,{label:"邮箱：",prop:"email"},{default:o(()=>[e(p,{modelValue:l.value.email,"onUpdate:modelValue":a[4]||(a[4]=r=>l.value.email=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:o(()=>[e(n,{label:"备注：",prop:"remark"},{default:o(()=>[e(p,{modelValue:l.value.remark,"onUpdate:modelValue":a[5]||(a[5]=r=>l.value.remark=r),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{ne as _};
