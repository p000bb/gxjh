import{K as R}from"./el-button-fb691484.js";/* empty css                   */import{E as $,a as j}from"./el-col-2760619c.js";/* empty css                */import{d as M,f as U,j as O,k as Q}from"./admin-ee59f3a1.js";import{E as d,a as q}from"./el-link-222bec93.js";import{d as A,r as l,k as a,ay as u,F as G,o as K,v as c,y as H,A as J,E as f,B as i,C as _,D as h,I as X}from"./viewer-97ef37b1.js";import{_ as Y}from"./dataDialog.vuevuetypescriptsetuptruelang-457da24b.js";import{L as Z}from"./index-66c85275.js";import{d as ee,g as ae}from"./index-15cc5994.js";import{a as te}from"./index-70f8277e.js";import{g as oe}from"./index-a14c7d2c.js";import{v as le}from"./directive-2e4aa6c9.js";import"./el-popper-17f91b7a.js";import"./debounce-38c8536c.js";import"./index-aec40419.js";import"./vnode-3a581f43.js";import"./aria-bc8e8b0f.js";import"./el-overlay-9e31ebb7.js";import"./refs-03c5e3c6.js";import"./el-tree-select-04f4c75d.js";import"./index-203fd0f4.js";import"./index-471e79b5.js";import"./uploadImg-2cd82401.js";/* empty css                */import"./cloneDeep-f32fe69a.js";const ne={class:"container-main flex"},re={class:"w-[250px] left-tree"},ie={style:{width:"calc(100% - 270px)"}},se={class:"table-main"},Ve=A({__name:"index",setup(me){const t=l({pageNum:1,pageSize:10}),y=l(!0),s=l(!1),g=l([]),m=l(0),w=()=>{t.value={pageNum:1,pageSize:10},n()},b=()=>{n()},n=async()=>{s.value=!0,ae(t.value).then(e=>{g.value=e.data.list||[],m.value=parseInt(e.data.total),s.value=!1})},k=l([{label:"图片名称",prop:"name",minWidth:120},{label:"图片路径",prop:"path",align:"center",minWidth:250,showOverflowTooltip:!1,render:e=>a(d,{type:"primary",href:"https://120.27.223.237/gxjh-file"+e.row.path,target:"_blank"},{default:()=>[e.row.path]})},{label:"创建时间",prop:"createTime",minWidth:150},{label:"创建时间",prop:"createTime",minWidth:150},{label:"图片种类",prop:"type",minWidth:120},{label:"文件类别",prop:"category.name",minWidth:120,render:e=>{var o;return(o=e.row.category)==null?void 0:o.name},show:()=>!t.value.categoryId},{label:"图片预览",prop:"preview",showOverflowTooltip:!1,minWidth:150,fixed:"right",render:e=>a("img",{title:e.row.title,style:"width: 100px; height: 100px",src:"https://120.27.223.237/gxjh-file"+e.row.path+`?name=${e.row.name}&size=${e.row.size}`},null)},{label:"操作",prop:"option",fixed:"right",width:150,render:e=>a(G,null,[a(d,{class:"table_link_btn",underline:!1,size:"small",type:"primary",icon:"Edit",onClick:()=>E(e.row)},{default:()=>[a("span",{class:"table_link_text"},[u("修改")])]}),a(d,{class:"table_link_btn",underline:!1,size:"small",type:"danger",icon:"Remove",onClick:()=>D(e.row)},{default:()=>[a("span",{class:"table_link_text"},[u("删除")])]})])}]),p=l(null),x=()=>{p.value.openDialog({categoryId:t.value.categoryId})},E=e=>{p.value.openDialog(e)},D=({id:e})=>{q.confirm("是否删除该条数据",{title:"警告",type:"warning"}).then(()=>{ee(e).then(o=>{o.code===0&&(M.success("删除成功"),n())})})},v=l([]),T=async()=>{const e=await oe({pageNum:1,pageSize:1e3});v.value=te([...e.data.list,{id:"0",name:"文件种类"}])||[]},C=e=>{e.id!=="0"?t.value.categoryId=e.id:t.value.categoryId=void 0,n()};return K(()=>{n(),T()}),(e,o)=>{const z=U,I=O,N=c("form-search"),L=Q,S=R,W=$,B=j,P=c("Table"),V=c("pagination"),F=le;return H(),J("div",ne,[f("div",re,[a(Z,{onNodeClick:C,data:v.value,"expand-on-click-node":!1,"node-key":"id","current-node-key":"0","default-expand-all":""},null,8,["data"])]),f("div",ie,[a(X,{name:"fade"},{default:i(()=>[_(a(L,{model:t.value,inline:!0,"label-width":"auto",class:"search-form"},{default:i(()=>[a(I,{label:"名称",prop:"name"},{default:i(()=>[a(z,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value.name=r),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),a(N,{onReset:w,onSearch:b})]),_:1},8,["model"]),[[h,y.value]])]),_:1}),f("div",se,[a(B,{gutter:10,class:"mb8"},{default:i(()=>[a(W,{span:1.5},{default:i(()=>[a(S,{type:"primary",plain:"",icon:"plus",size:"small",onClick:o[1]||(o[1]=r=>x())},{default:i(()=>[u("新增")]),_:1})]),_:1})]),_:1}),_(a(P,{data:g.value,"row-key":"id",columns:k.value},null,8,["data","columns"]),[[F,s.value]]),_(a(V,{total:m.value,page:t.value.pageNum,"onUpdate:page":o[2]||(o[2]=r=>t.value.pageNum=r),limit:t.value.pageSize,"onUpdate:limit":o[3]||(o[3]=r=>t.value.pageSize=r),onPagination:n},null,8,["total","page","limit"]),[[h,m.value>0]])]),a(Y,{ref_key:"dataDialogRef",ref:p,onGetPageList:n},null,512)])])}}});export{Ve as default};
