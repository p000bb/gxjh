import{L as Z}from"./el-button-534f93ec.js";import{E as $}from"./el-overlay-56edc591.js";/* empty css                */import{E as M,a as O}from"./el-col-af40c86f.js";import{d as P,n as G,f as K,D as Q,B as j,o as H}from"./admin-d15e446e.js";import"./el-popper-5f9a363e.js";import{E as J,a as W}from"./el-radio-2d139b26.js";import{E as X}from"./el-tree-select-4038975f.js";import{r as i}from"./service copy-fb1d097e.js";import{g as Y}from"./index-d81ecfdd.js";import{g as ee}from"./index-71e570d3.js";import{a as le}from"./index-b7dce1f7.js";import{d as ae,r as d,o as te,y as f,x as v,B as l,E as oe,k as e,ay as _,K as re,A as ue,F as se,aQ as ne}from"./viewer-71a6cc7b.js";const c="/user";function de(u){return i({url:c,method:"get",params:{id:u}})}function xe(u){return i({url:`${c}/page`,method:"post",data:u})}function pe(u){return i({url:c,method:"post",data:u})}function me(u){return i({url:c,method:"put",data:u})}function Ie(u){return i({url:c,method:"delete",params:{id:u}})}const ie={class:"dialog-footer"},Le=ae({__name:"dataDialog",emits:["getPageList"],setup(u,{expose:y,emit:U}){const h=U,g=d(),p=d(!1),V=d(),a=d({}),x=d({name:[{required:!0,message:"请输入名称",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,message:"请输入正确的邮箱",trigger:"blur"}],account:[{required:!0,message:"请输入用户账号",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],deptId:[{required:!0,message:"请选择所属部门",trigger:"change"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]}),I=()=>{p.value=!1},L=()=>{var r;(r=V.value)==null||r.validate(async t=>{t&&(a.value.id?await me(a.value):await pe(a.value),p.value=!1,P.success("操作成功"),h("getPageList"))})},q=async r=>{if(r!=null&&r.id){const t=await de(r.id);a.value={...t.data},g.value="修改用户",p.value=!0}else a.value={state:0},g.value="新增用户",p.value=!0},b=d([]),B=async()=>{const r=await ee({pageSize:1e3});b.value=le(r.data.list)||[]},k=d([]),R=async()=>{const r=await Y({pageSize:1e3});k.value=r.data.list||[]};return te(()=>{B(),R()}),y({openDialog:q}),(r,t)=>{const T=X,s=G,n=M,m=K,w=J,C=W,D=Q,z=j,A=O,F=H,E=Z,N=$;return f(),v(N,{title:g.value,modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=o=>p.value=o),width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[oe("div",ie,[e(E,{onClick:I},{default:l(()=>[_("取 消")]),_:1}),e(E,{type:"primary",onClick:L},{default:l(()=>[_("保 存")]),_:1})])]),default:l(()=>[e(F,{ref_key:"formRef",ref:V,model:a.value,rules:x.value,"label-width":"auto"},{default:l(()=>[e(A,{gutter:40},{default:l(()=>[e(n,{span:24},{default:l(()=>[e(s,{label:"所属部门：",prop:"deptId"},{default:l(()=>[e(T,{modelValue:a.value.deptId,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.deptId=o),data:b.value,props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"选择所属部门","check-strictly":"",filterable:"","render-after-expand":!1,class:"w-full"},null,8,["modelValue","data"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(s,{label:"用户昵称：",prop:"nickname"},{default:l(()=>[e(m,{modelValue:a.value.nickname,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.nickname=o),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(s,{label:"用户状态",prop:"state"},{default:l(()=>[e(C,{modelValue:a.value.state,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.state=o)},{default:l(()=>[e(w,{label:0},{default:l(()=>[_("正常")]),_:1}),e(w,{label:1},{default:l(()=>[_("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(s,{label:"用户账号：",prop:"account"},{default:l(()=>[e(m,{modelValue:a.value.account,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.account=o),placeholder:"请输入用户账号"},null,8,["modelValue"])]),_:1})]),_:1}),a.value.id?re("",!0):(f(),v(n,{key:0,span:12},{default:l(()=>[e(s,{label:"用户密码：",prop:"password"},{default:l(()=>[e(m,{type:"password",modelValue:a.value.password,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.password=o),placeholder:"请输入用户密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})),e(n,{span:12},{default:l(()=>[e(s,{label:"电话号码：",prop:"phone"},{default:l(()=>[e(m,{modelValue:a.value.phone,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.phone=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(s,{label:"邮箱：",prop:"email"},{default:l(()=>[e(m,{modelValue:a.value.email,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.email=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(s,{label:"所属角色：",prop:"roleIds"},{default:l(()=>[e(z,{modelValue:a.value.roleIds,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.roleIds=o),placeholder:"请选择所属角色",multiple:"",clearable:"",class:"w-full"},{default:l(()=>[(f(!0),ue(se,null,ne(k.value,(o,S)=>(f(),v(D,{key:S,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(s,{label:"备注：",prop:"remark"},{default:l(()=>[e(m,{type:"textarea",modelValue:a.value.remark,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.remark=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{Le as _,Ie as d,xe as g};
