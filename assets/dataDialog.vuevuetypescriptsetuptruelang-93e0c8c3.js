/* empty css             */import{E as U}from"./el-overlay-b9b364f0.js";import{E as B}from"./el-button-b054d70c.js";/* empty css                */import{E as C}from"./el-input-number-ca8828b1.js";import{E as D}from"./el-input-351b3524.js";import"./el-tag-c034fee8.js";import{E as I,a as L}from"./el-select-9f1993c4.js";import"./el-scrollbar-a1856fc2.js";import"./el-popper-b532a2f5.js";import{E as q,a as N}from"./el-form-item-c56bbdeb.js";import{V as i,G}from"./user-9279ed61.js";import{d as F,r as m,y as R,x as M,B as n,E as $,k as l,ag as g}from"./viewer-a917d3a0.js";const p="/permission";function j(o){return i({url:p,method:"get",params:{id:o}})}function ue(o){return i({url:`${p}/page`,method:"post",data:o})}function z(o){return i({url:p,method:"post",data:o})}function A(o){return i({url:p,method:"put",data:o})}function re(o){return i({url:p,method:"delete",params:{id:o}})}const H={class:"dialog-footer"},se=F({__name:"dataDialog",emits:["getPageList"],setup(o,{expose:h,emit:E}){const P=E,f=m(),r=m(!1),c=m(),e=m({}),V=m({name:[{required:!0,message:"请输入名称",trigger:"change"}],path:[{required:!0,message:"请输入接口标识",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}]}),b=()=>{r.value=!1},T=()=>{var t;(t=c.value)==null||t.validate(async a=>{a&&(e.value.id?await A(e.value):await z(e.value),r.value=!1,G.success("操作成功"),P("getPageList"))})},y=async t=>{if(t!=null&&t.id){const a=await j(t.id);e.value={...a.data},f.value="修改接口",r.value=!0}else e.value={parentId:(t==null?void 0:t.parentId)||0,parentPath:(t==null?void 0:t.parentPath)||""},f.value="新增接口",r.value=!0},O=t=>{t==="==POST"&&(e.value.path=e.value.parentPath+t,e.value.name="新增"),t==="==PUT"&&(e.value.path=e.value.parentPath+t,e.value.name="修改"),t==="==DELETE"&&(e.value.path=e.value.parentPath+t,e.value.name="删除"),t==="/page==POST"&&(e.value.path=e.value.parentPath+t,e.value.name="列表查询"),t==="==GET"&&(e.value.path=e.value.parentPath+t,e.value.name="单条查询"),t==="/tree==POST"&&(e.value.path=e.value.parentPath+t,e.value.name="树查询")};return h({openDialog:y}),(t,a)=>{const v=D,d=q,s=I,k=L,w=C,x=N,_=B,S=U;return R(),M(S,{title:f.value,modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=u=>r.value=u),width:"500px","close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[$("div",H,[l(_,{onClick:b},{default:n(()=>[g("取 消")]),_:1}),l(_,{type:"primary",onClick:T},{default:n(()=>[g("保 存")]),_:1})])]),default:n(()=>[l(x,{ref_key:"formRef",ref:c,model:e.value,rules:V.value,"label-width":"auto"},{default:n(()=>[l(d,{label:"接口名称：",prop:"name"},{default:n(()=>[l(v,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=u=>e.value.name=u),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"接口标识：",prop:"path"},{default:n(()=>[l(v,{modelValue:e.value.path,"onUpdate:modelValue":a[1]||(a[1]=u=>e.value.path=u),placeholder:"请输入标识"},null,8,["modelValue"])]),_:1}),l(d,{label:"接口种类：",prop:"type"},{default:n(()=>[l(k,{modelValue:e.value.type,"onUpdate:modelValue":a[2]||(a[2]=u=>e.value.type=u),onChange:O},{default:n(()=>[l(s,{label:"新增",value:"==POST"}),l(s,{label:"修改",value:"==PUT"}),l(s,{label:"删除",value:"==DELETE"}),l(s,{label:"列表查询",value:"/page==POST"}),l(s,{label:"单条查询",value:"==GET"}),l(s,{label:"树查询",value:"/tree==POST"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"排序：",prop:"sort"},{default:n(()=>[l(w,{modelValue:e.value.sort,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value.sort=u),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{se as _,re as d,ue as g};
