import{o as T,k as D,F as L,a as $,D as j,G,e as U,h as Y}from"./el-button-ce4d76f3.js";import{o as K,aU as q,ar as J,j as Q,ai as Z,w as ee,c2 as te,aH as g,d as oe,k as se,G as O,h as ne}from"./viewer-de354506.js";import{t as ie}from"./el-popper-a78eaae7.js";import{F as ae}from"./admin-a54a04d3.js";import{P as w}from"./vnode-b3f97862.js";const Be=(e,t,o)=>{let s={offsetX:0,offsetY:0};const n=r=>{const u=r.clientX,v=r.clientY,{offsetX:f,offsetY:y}=s,h=e.value.getBoundingClientRect(),b=h.left,k=h.top,H=h.width,X=h.height,z=document.documentElement.clientWidth,N=document.documentElement.clientHeight,W=-b+f,A=-k+y,F=z-b-H+f,V=N-k-X+y,M=_=>{const x=Math.min(Math.max(f+_.clientX-u,W),F),C=Math.min(Math.max(y+_.clientY-v,A),V);s={offsetX:x,offsetY:C},e.value.style.transform=`translate(${T(x)}, ${T(C)})`},S=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",S)},a=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",n)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",n)};K(()=>{q(()=>{o.value?a():i()})}),J(()=>{i()})},ce=()=>{},le=Array.isArray,re=e=>typeof e=="function",ue=e=>typeof e=="symbol";let fe;function de(e,t=fe){t&&t.active&&t.effects.push(e)}const he=e=>{const t=new Set(e);return t.w=0,t.n=0,t},I=e=>(e.w&l)>0,R=e=>(e.n&l)>0,me=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=l},pe=e=>{const{deps:t}=e;if(t.length){let o=0;for(let s=0;s<t.length;s++){const n=t[s];I(n)&&!R(n)?n.delete(e):t[o++]=n,n.w&=~l,n.n&=~l}t.length=o}};let d=0,l=1;const E=30;let c;class ve{constructor(t,o=null,s){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,de(this,s)}run(){if(!this.active)return this.fn();let t=c,o=m;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=c,c=this,m=!0,l=1<<++d,d<=E?me(this):P(this),this.fn()}finally{d<=E&&pe(this),l=1<<--d,c=this.parent,m=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){c===this?this.deferStop=!0:this.active&&(P(this),this.onStop&&this.onStop(),this.active=!1)}}function P(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let m=!0;function ye(e,t){let o=!1;d<=E?R(e)||(e.n|=l,o=!I(e)):o=!e.has(c),o&&(e.add(c),c.deps.push(e))}function ge(e,t){const o=le(e)?e:[...e];for(const s of o)s.computed&&B(s);for(const s of o)s.computed||B(s)}function B(e,t){(e!==c||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ue));function p(e){const t=e&&e.__v_raw;return t?p(t):e}function we(e){m&&c&&(e=p(e),ye(e.dep||(e.dep=he())))}function Ee(e,t){e=p(e);const o=e.dep;o&&ge(o)}class be{constructor(t,o,s,n){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ve(t,()=>{this._dirty||(this._dirty=!0,Ee(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=p(this);return we(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ke(e,t,o=!1){let s,n;const a=re(e);return a?(s=e,n=ce):(s=e.get,n=e.set),new be(s,n,a||!n,o)}const De=(e,t={})=>{Q(e)||ie("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||D("popup"),s=ke(()=>o.bm("parent","hidden"));if(!Z||L(document.body,s.value))return;let n=0,a=!1,i="0";const r=()=>{setTimeout(()=>{G(document==null?void 0:document.body,s.value),a&&document&&(document.body.style.width=i)},200)};ee(e,u=>{if(!u){r();return}a=!L(document.body,s.value),a&&(i=document.body.style.width),n=ae(o.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=$(document.body,"overflowY");n>0&&(v||f==="scroll")&&a&&(document.body.style.width=`calc(100% - ${n}px)`),j(document.body,s.value)}),te(()=>r())},Me=e=>{if(!e)return{onClick:g,onMousedown:g,onMouseup:g};let t=!1,o=!1;return{onClick:i=>{t&&o&&e(i),t=o=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{o=i.target===i.currentTarget}}},Se=U({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),_e={click:e=>e instanceof MouseEvent},xe="overlay";var Ce=oe({name:"ElOverlay",props:Se,emits:_e,setup(e,{slots:t,emit:o}){const s=D(xe),n=u=>{o("click",u)},{onClick:a,onMousedown:i,onMouseup:r}=Me(e.customMaskEvent?void 0:n);return()=>e.mask?se("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:i,onMouseup:r},[O(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):ne("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(t,"default")])}});const Ie=Ce;export{Ie as E,De as a,Me as b,Be as u};
