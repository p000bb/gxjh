import{o as ue,av as we,a2 as Ee,l as ke,U as de,w as q,bx as Se,ai as K,d as V,m as x,E as w,h as Me,i as se,g as A,q as P,x as j,D as H,J as k,I as s,aa as Te,y as B,t as G,a7 as De,H as Z,a8 as fe,r as _,a5 as Ie,k as Be,aG as ne,K as _e,$ as Ae,B as Le,z as $e,au as Fe,C as Re,A as Pe,aS as Oe}from"./index-6ba073dc.js";import{N as J,H as te,a2 as le,w as Ne,a0 as ze,a3 as Ye,A as oe,B as Q,R as xe,Z as Ve,X as He,_ as me,aj as Ue,F as Xe,a4 as Ke,K as ae,ak as je,al as We,$ as ie,E as qe}from"./el-button-2bb63f1b.js";import{P as W}from"./vnode-92ce72e6.js";import{t as Ge,F as Ze,g as Je}from"./el-popper-f7dc5037.js";import{c as Qe}from"./refs-d5726a5a.js";import{F as et,U as ve}from"./admin-13832e1f.js";const tt=(e,t,o)=>{let n={offsetX:0,offsetY:0};const l=i=>{const d=i.clientX,v=i.clientY,{offsetX:f,offsetY:y}=n,m=e.value.getBoundingClientRect(),u=m.left,C=m.top,L=m.width,O=m.height,N=document.documentElement.clientWidth,$=document.documentElement.clientHeight,z=-u+f,F=-C+y,M=N-u-L+f,T=$-C-O+y,R=E=>{const a=Math.min(Math.max(f+E.clientX-d,z),M),g=Math.min(Math.max(y+E.clientY-v,F),T);n={offsetX:a,offsetY:g},e.value.style.transform=`translate(${J(a)}, ${J(g)})`},p=()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",p)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)};ue(()=>{we(()=>{o.value?c():r()})}),Ee(()=>{r()})},ot=()=>{},st=Array.isArray,nt=e=>typeof e=="function",lt=e=>typeof e=="symbol";let at;function it(e,t=at){t&&t.active&&t.effects.push(e)}const rt=e=>{const t=new Set(e);return t.w=0,t.n=0,t},pe=e=>(e.w&S)>0,he=e=>(e.n&S)>0,ct=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=S},ut=e=>{const{deps:t}=e;if(t.length){let o=0;for(let n=0;n<t.length;n++){const l=t[n];pe(l)&&!he(l)?l.delete(e):t[o++]=l,l.w&=~S,l.n&=~S}t.length=o}};let Y=0,S=1;const ee=30;let b;class dt{constructor(t,o=null,n){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,it(this,n)}run(){if(!this.active)return this.fn();let t=b,o=U;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,U=!0,S=1<<++Y,Y<=ee?ct(this):re(this),this.fn()}finally{Y<=ee&&ut(this),S=1<<--Y,b=this.parent,U=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(re(this),this.onStop&&this.onStop(),this.active=!1)}}function re(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let U=!0;function ft(e,t){let o=!1;Y<=ee?he(e)||(e.n|=S,o=!pe(e)):o=!e.has(b),o&&(e.add(b),b.deps.push(e))}function mt(e,t){const o=st(e)?e:[...e];for(const n of o)n.computed&&ce(n);for(const n of o)n.computed||ce(n)}function ce(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(lt));function X(e){const t=e&&e.__v_raw;return t?X(t):e}function vt(e){U&&b&&(e=X(e),ft(e.dep||(e.dep=rt())))}function pt(e,t){e=X(e);const o=e.dep;o&&mt(o)}class ht{constructor(t,o,n,l){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new dt(t,()=>{this._dirty||(this._dirty=!0,pt(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!l,this.__v_isReadonly=n}get value(){const t=X(this);return vt(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function yt(e,t,o=!1){let n,l;const c=nt(e);return c?(n=e,l=ot):(n=e.get,l=e.set),new ht(n,l,c||!l,o)}const gt=(e,t={})=>{ke(e)||Ge("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||te("popup"),n=yt(()=>o.bm("parent","hidden"));if(!de||le(document.body,n.value))return;let l=0,c=!1,r="0";const i=()=>{setTimeout(()=>{Ye(document==null?void 0:document.body,n.value),c&&document&&(document.body.style.width=r)},200)};q(e,d=>{if(!d){i();return}c=!le(document.body,n.value),c&&(r=document.body.style.width),l=et(o.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=Ne(document.body,"overflowY");l>0&&(v||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${l}px)`),ze(document.body,n.value)}),Se(()=>i())},ye=e=>{if(!e)return{onClick:K,onMousedown:K,onMouseup:K};let t=!1,o=!1;return{onClick:r=>{t&&o&&e(r),t=o=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},bt=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Q([String,Array,Object])},zIndex:{type:Q([String,Number])}}),Ct={click:e=>e instanceof MouseEvent},wt="overlay";var Et=V({name:"ElOverlay",props:bt,emits:Ct,setup(e,{slots:t,emit:o}){const n=te(wt),l=d=>{o("click",d)},{onClick:c,onMousedown:r,onMouseup:i}=ye(e.customMaskEvent?void 0:l);return()=>e.mask?x("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:r,onMouseup:i},[w(t,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):Me("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[w(t,"default")])}});const kt=Et,ge=Symbol("dialogInjectionKey"),be=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:xe},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),St={close:()=>!0},Mt=["aria-level"],Tt=["aria-label"],Dt=["id"],It=V({name:"ElDialogContent"}),Bt=V({...It,props:be,emits:St,setup(e){const t=e,{t:o}=Ve(),{Close:n}=Ue,{dialogRef:l,headerRef:c,bodyId:r,ns:i,style:d}=se(ge),{focusTrapRef:v}=se(Ze),f=A(()=>[i.b(),i.is("fullscreen",t.fullscreen),i.is("draggable",t.draggable),i.is("align-center",t.alignCenter),{[i.m("center")]:t.center},t.customClass]),y=Qe(v,l),m=A(()=>t.draggable);return tt(l,c,m),(u,C)=>(P(),j("div",{ref:s(y),class:k(s(f)),style:fe(s(d)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:c,class:k(s(i).e("header"))},[w(u.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":u.ariaLevel,class:k(s(i).e("title"))},Te(u.title),11,Mt)]),u.showClose?(P(),j("button",{key:0,"aria-label":s(o)("el.dialog.close"),class:k(s(i).e("headerbtn")),type:"button",onClick:C[0]||(C[0]=L=>u.$emit("close"))},[x(s(He),{class:k(s(i).e("close"))},{default:B(()=>[(P(),G(De(u.closeIcon||s(n))))]),_:1},8,["class"])],10,Tt)):Z("v-if",!0)],2),H("div",{id:s(r),class:k(s(i).e("body"))},[w(u.$slots,"default")],10,Dt),u.$slots.footer?(P(),j("footer",{key:0,class:k(s(i).e("footer"))},[w(u.$slots,"footer")],2)):Z("v-if",!0)],6))}});var _t=me(Bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const At=oe({...be,appendToBody:Boolean,beforeClose:{type:Q(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Lt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ve]:e=>Xe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},$t=(e,t)=>{const n=Be().emit,{nextZIndex:l}=Ke();let c="";const r=ae(),i=ae(),d=_(!1),v=_(!1),f=_(!1),y=_(e.zIndex||l());let m,u;const C=je("namespace",We),L=A(()=>{const h={},I=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(h[`${I}-margin-top`]=e.top),e.width&&(h[`${I}-width`]=J(e.width))),h}),O=A(()=>e.alignCenter?{display:"flex"}:{});function N(){n("opened")}function $(){n("closed"),n(ve,!1),e.destroyOnClose&&(f.value=!1)}function z(){n("close")}function F(){u==null||u(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=ne(()=>p(),e.openDelay):p()}function M(){m==null||m(),u==null||u(),e.closeDelay&&e.closeDelay>0?{stop:u}=ne(()=>E(),e.closeDelay):E()}function T(){function h(I){I||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(h):M()}function R(){e.closeOnClickModal&&T()}function p(){de&&(d.value=!0)}function E(){d.value=!1}function a(){n("openAutoFocus")}function g(){n("closeAutoFocus")}function D(h){var I;((I=h.detail)==null?void 0:I.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&gt(d);function Ce(){e.closeOnPressEscape&&T()}return q(()=>e.modelValue,h=>{h?(v.value=!1,F(),f.value=!0,y.value=e.zIndex?y.value++:l(),Ie(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&M()}),q(()=>e.fullscreen,h=>{t.value&&(h?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),ue(()=>{e.modelValue&&(d.value=!0,f.value=!0,F())}),{afterEnter:N,afterLeave:$,beforeLeave:z,handleClose:T,onModalClick:R,close:M,doClose:E,onOpenAutoFocus:a,onCloseAutoFocus:g,onCloseRequested:Ce,onFocusoutPrevented:D,titleId:r,bodyId:i,closed:v,style:L,overlayDialogStyle:O,rendered:f,visible:d,zIndex:y}},Ft=["aria-label","aria-labelledby","aria-describedby"],Rt=V({name:"ElDialog",inheritAttrs:!1}),Pt=V({...Rt,props:At,emits:Lt,setup(e,{expose:t}){const o=e,n=_e();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!n.title)),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},A(()=>!!o.customClass));const l=te("dialog"),c=_(),r=_(),i=_(),{visible:d,titleId:v,bodyId:f,style:y,overlayDialogStyle:m,rendered:u,zIndex:C,afterEnter:L,afterLeave:O,beforeLeave:N,handleClose:$,onModalClick:z,onOpenAutoFocus:F,onCloseAutoFocus:M,onCloseRequested:T,onFocusoutPrevented:R}=$t(o,c);Ae(ge,{dialogRef:c,headerRef:r,bodyId:f,ns:l,rendered:u,style:y});const p=ye(z),E=A(()=>o.draggable&&!o.fullscreen);return t({visible:d,dialogContentRef:i}),(a,g)=>(P(),G(Oe,{to:"body",disabled:!a.appendToBody},[x(Pe,{name:"dialog-fade",onAfterEnter:s(L),onAfterLeave:s(O),onBeforeLeave:s(N),persisted:""},{default:B(()=>[Le(x(s(kt),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":s(C)},{default:B(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:s(v),"aria-describedby":s(f),class:k(`${s(l).namespace.value}-overlay-dialog`),style:fe(s(m)),onClick:g[0]||(g[0]=(...D)=>s(p).onClick&&s(p).onClick(...D)),onMousedown:g[1]||(g[1]=(...D)=>s(p).onMousedown&&s(p).onMousedown(...D)),onMouseup:g[2]||(g[2]=(...D)=>s(p).onMouseup&&s(p).onMouseup(...D))},[x(s(Je),{loop:"",trapped:s(d),"focus-start-el":"container",onFocusAfterTrapped:s(F),onFocusAfterReleased:s(M),onFocusoutPrevented:s(R),onReleaseRequested:s(T)},{default:B(()=>[s(u)?(P(),G(_t,$e({key:0,ref_key:"dialogContentRef",ref:i},a.$attrs,{"custom-class":a.customClass,center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:s(E),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:s($)}),Fe({header:B(()=>[a.$slots.title?w(a.$slots,"title",{key:1}):w(a.$slots,"header",{key:0,close:s($),titleId:s(v),titleClass:s(l).e("title")})]),default:B(()=>[w(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:B(()=>[w(a.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ft)]),_:3},8,["mask","overlay-class","z-index"]),[[Re,s(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Ot=me(Pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Ut=qe(Ot);export{kt as E,Lt as a,Ut as b,At as d,$t as u};
