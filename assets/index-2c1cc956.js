import{e as $e,h as pe,k as he,o as qe,_ as ge,u as Be,B as it,v as rt,j as at,y as yt,x as nt,L as Ve,E as Ze,w as lt,s as Pe}from"./el-button-ce4d76f3.js";import{U as ce,C as Ue,t as Ct,f as ct,v as xt,I as Re,d as ke,w as kt}from"./admin-a54a04d3.js";import{v as _t}from"./service copy-a1f7ec66.js";import{E as St}from"./el-overlay-931cfcb0.js";import{E as Mt,a as Et}from"./el-tab-pane-97e74cb8.js";import{E as Ot}from"./el-input-number-f9410f8a.js";import"./el-tooltip-4ed993c7.js";import{i as Xe,b as ht,d as We,E as Le,e as ut,t as $t}from"./el-popper-a78eaae7.js";import{ai as Lt,s as Ae,r as W,o as ye,w as J,b as V,g as Ie,d as ee,y as L,A as I,E as g,M as H,L as c,ax as j,an as _e,a_ as Ge,i as dt,aU as Ht,F as ve,aQ as Se,ap as fe,au as re,ao as pt,x as be,B as U,C as ie,aR as Je,k as N,K as Q,ay as le,az as Ee,aO as Vt,D as me,aL as Wt,am as It,ak as Xt,aq as ze,h as Tt,b6 as ft,b9 as mt,ba as gt,t as Yt,b8 as Nt,J as Bt}from"./viewer-de354506.js";import{d as Fe}from"./debounce-00950313.js";import{g as Ke}from"./position-2eeb3bc3.js";import{a as Pt,u as At,b as zt}from"./index-8b06c014.js";import"./index-3589b39e.js";import"./vnode-b3f97862.js";import"./refs-df71abc4.js";import"./index-bc72a58b.js";import"./index-d8b5141f.js";const Ft=$e({color:{type:pe(Object),required:!0},vertical:{type:Boolean,default:!1}});let Te=!1;function Oe(e,o){if(!Lt)return;const s=function(i){var a;(a=o.drag)==null||a.call(o,i)},t=function(i){var a;document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,Te=!1,(a=o.end)==null||a.call(o,i)},r=function(i){var a;Te||(i.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",s),document.addEventListener("mouseup",t),document.addEventListener("touchmove",s),document.addEventListener("touchend",t),Te=!0,(a=o.start)==null||a.call(o,i))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)}const Ut=e=>{const o=Ie(),s=Ae(),t=Ae();function r(a){a.target!==s.value&&i(a)}function i(a){if(!t.value||!s.value)return;const l=o.vnode.el.getBoundingClientRect(),{clientX:n,clientY:d}=Ke(a);if(e.vertical){let u=d-l.top;u=Math.max(s.value.offsetHeight/2,u),u=Math.min(u,l.height-s.value.offsetHeight/2),e.color.set("alpha",Math.round((u-s.value.offsetHeight/2)/(l.height-s.value.offsetHeight)*100))}else{let u=n-l.left;u=Math.max(s.value.offsetWidth/2,u),u=Math.min(u,l.width-s.value.offsetWidth/2),e.color.set("alpha",Math.round((u-s.value.offsetWidth/2)/(l.width-s.value.offsetWidth)*100))}}return{thumb:s,bar:t,handleDrag:i,handleClick:r}},Rt=(e,{bar:o,thumb:s,handleDrag:t})=>{const r=Ie(),i=he("color-alpha-slider"),a=W(0),h=W(0),l=W();function n(){if(!s.value||e.vertical)return 0;const E=r.vnode.el,y=e.color.get("alpha");return E?Math.round(y*(E.offsetWidth-s.value.offsetWidth/2)/100):0}function d(){if(!s.value)return 0;const E=r.vnode.el;if(!e.vertical)return 0;const y=e.color.get("alpha");return E?Math.round(y*(E.offsetHeight-s.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:E,g:y,b:z}=e.color.toRgb();return`linear-gradient(to right, rgba(${E}, ${y}, ${z}, 0) 0%, rgba(${E}, ${y}, ${z}, 1) 100%)`}return""}function m(){a.value=n(),h.value=d(),l.value=u()}ye(()=>{if(!o.value||!s.value)return;const E={drag:y=>{t(y)},end:y=>{t(y)}};Oe(o.value,E),Oe(s.value,E),m()}),J(()=>e.color.get("alpha"),()=>m()),J(()=>e.color.value,()=>m());const C=V(()=>[i.b(),i.is("vertical",e.vertical)]),p=V(()=>i.e("bar")),f=V(()=>i.e("thumb")),b=V(()=>({background:l.value})),x=V(()=>({left:qe(a.value),top:qe(h.value)}));return{rootKls:C,barKls:p,barStyle:b,thumbKls:f,thumbStyle:x,update:m}},Kt="ElColorAlphaSlider",jt=ee({name:Kt}),Dt=ee({...jt,props:Ft,setup(e,{expose:o}){const s=e,{bar:t,thumb:r,handleDrag:i,handleClick:a}=Ut(s),{rootKls:h,barKls:l,barStyle:n,thumbKls:d,thumbStyle:u,update:m}=Rt(s,{bar:t,thumb:r,handleDrag:i});return o({update:m,bar:t,thumb:r}),(C,p)=>(L(),I("div",{class:H(c(h))},[g("div",{ref_key:"bar",ref:t,class:H(c(l)),style:j(c(n)),onClick:p[0]||(p[0]=(...f)=>c(a)&&c(a)(...f))},null,6),g("div",{ref_key:"thumb",ref:r,class:H(c(d)),style:j(c(u))},null,6)],2))}});var qt=ge(Dt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const Zt=ee({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const o=he("color-hue-slider"),s=Ie(),t=W(),r=W(),i=W(0),a=W(0),h=V(()=>e.color.get("hue"));J(()=>h.value,()=>{m()});function l(C){C.target!==t.value&&n(C)}function n(C){if(!r.value||!t.value)return;const f=s.vnode.el.getBoundingClientRect(),{clientX:b,clientY:x}=Ke(C);let E;if(e.vertical){let y=x-f.top;y=Math.min(y,f.height-t.value.offsetHeight/2),y=Math.max(t.value.offsetHeight/2,y),E=Math.round((y-t.value.offsetHeight/2)/(f.height-t.value.offsetHeight)*360)}else{let y=b-f.left;y=Math.min(y,f.width-t.value.offsetWidth/2),y=Math.max(t.value.offsetWidth/2,y),E=Math.round((y-t.value.offsetWidth/2)/(f.width-t.value.offsetWidth)*360)}e.color.set("hue",E)}function d(){if(!t.value)return 0;const C=s.vnode.el;if(e.vertical)return 0;const p=e.color.get("hue");return C?Math.round(p*(C.offsetWidth-t.value.offsetWidth/2)/360):0}function u(){if(!t.value)return 0;const C=s.vnode.el;if(!e.vertical)return 0;const p=e.color.get("hue");return C?Math.round(p*(C.offsetHeight-t.value.offsetHeight/2)/360):0}function m(){i.value=d(),a.value=u()}return ye(()=>{if(!r.value||!t.value)return;const C={drag:p=>{n(p)},end:p=>{n(p)}};Oe(r.value,C),Oe(t.value,C),m()}),{bar:r,thumb:t,thumbLeft:i,thumbTop:a,hueValue:h,handleClick:l,update:m,ns:o}}});function Gt(e,o,s,t,r,i){return L(),I("div",{class:H([e.ns.b(),e.ns.is("vertical",e.vertical)])},[g("div",{ref:"bar",class:H(e.ns.e("bar")),onClick:o[0]||(o[0]=(...a)=>e.handleClick&&e.handleClick(...a))},null,2),g("div",{ref:"thumb",class:H(e.ns.e("thumb")),style:j({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Jt=ge(Zt,[["render",Gt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const Qt=$e({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Be,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:pe(Array)},validateEvent:{type:Boolean,default:!0}}),eo={[ce]:e=>_e(e)||Xe(e),[Ue]:e=>_e(e)||Xe(e),activeChange:e=>_e(e)||Xe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},vt=Symbol("colorPickerContextKey"),Qe=function(e,o,s){return[e,o*s/((e=(2-o)*s)<1?e:2-e)||0,e/2]},to=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},oo=function(e){return typeof e=="string"&&e.includes("%")},we=function(e,o){to(e)&&(e="100%");const s=oo(e);return e=Math.min(o,Math.max(0,Number.parseFloat(`${e}`))),s&&(e=Number.parseInt(`${e*o}`,10)/100),Math.abs(e-o)<1e-6?1:e%o/Number.parseFloat(o)},et={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},He=e=>{e=Math.min(Math.round(e),255);const o=Math.floor(e/16),s=e%16;return`${et[o]||o}${et[s]||s}`},tt=function({r:e,g:o,b:s}){return Number.isNaN(+e)||Number.isNaN(+o)||Number.isNaN(+s)?"":`#${He(e)}${He(o)}${He(s)}`},Ye={A:10,B:11,C:12,D:13,E:14,F:15},de=function(e){return e.length===2?(Ye[e[0].toUpperCase()]||+e[0])*16+(Ye[e[1].toUpperCase()]||+e[1]):Ye[e[1].toUpperCase()]||+e[1]},so=function(e,o,s){o=o/100,s=s/100;let t=o;const r=Math.max(s,.01);s*=2,o*=s<=1?s:2-s,t*=r<=1?r:2-r;const i=(s+o)/2,a=s===0?2*t/(r+t):2*o/(s+o);return{h:e,s:a*100,v:i*100}},ot=(e,o,s)=>{e=we(e,255),o=we(o,255),s=we(s,255);const t=Math.max(e,o,s),r=Math.min(e,o,s);let i;const a=t,h=t-r,l=t===0?0:h/t;if(t===r)i=0;else{switch(t){case e:{i=(o-s)/h+(o<s?6:0);break}case o:{i=(s-e)/h+2;break}case s:{i=(e-o)/h+4;break}}i/=6}return{h:i*360,s:l*100,v:a*100}},xe=function(e,o,s){e=we(e,360)*6,o=we(o,100),s=we(s,100);const t=Math.floor(e),r=e-t,i=s*(1-o),a=s*(1-r*o),h=s*(1-(1-r)*o),l=t%6,n=[s,a,i,i,h,s][l],d=[h,s,s,a,i,i][l],u=[i,i,h,s,s,a][l];return{r:Math.round(n*255),g:Math.round(d*255),b:Math.round(u*255)}};class Me{constructor(o={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const s in o)Ge(o,s)&&(this[s]=o[s]);o.value?this.fromString(o.value):this.doOnChange()}set(o,s){if(arguments.length===1&&typeof o=="object"){for(const t in o)Ge(o,t)&&this.set(t,o[t]);return}this[`_${o}`]=s,this.doOnChange()}get(o){return o==="alpha"?Math.floor(this[`_${o}`]):this[`_${o}`]}toRgb(){return xe(this._hue,this._saturation,this._value)}fromString(o){if(!o){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const s=(t,r,i)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,i)),this.doOnChange()};if(o.includes("hsl")){const t=o.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,i)=>i>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s:i,v:a}=so(t[0],t[1],t[2]);s(r,i,a)}}else if(o.includes("hsv")){const t=o.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,i)=>i>2?Number.parseFloat(r):Number.parseInt(r,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&s(t[0],t[1],t[2])}else if(o.includes("rgb")){const t=o.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,i)=>i>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s:i,v:a}=ot(t[0],t[1],t[2]);s(r,i,a)}}else if(o.includes("#")){const t=o.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let r,i,a;t.length===3?(r=de(t[0]+t[0]),i=de(t[1]+t[1]),a=de(t[2]+t[2])):(t.length===6||t.length===8)&&(r=de(t.slice(0,2)),i=de(t.slice(2,4)),a=de(t.slice(4,6))),t.length===8?this._alpha=de(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h,s:l,v:n}=ot(r,i,a);s(h,l,n)}}compare(o){return Math.abs(o._hue-this._hue)<2&&Math.abs(o._saturation-this._saturation)<1&&Math.abs(o._value-this._value)<1&&Math.abs(o._alpha-this._alpha)<1}doOnChange(){const{_hue:o,_saturation:s,_value:t,_alpha:r,format:i}=this;if(this.enableAlpha)switch(i){case"hsl":{const a=Qe(o,s/100,t/100);this.value=`hsla(${o}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${o}, ${Math.round(s)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${tt(xe(o,s,t))}${He(r*255/100)}`;break}default:{const{r:a,g:h,b:l}=xe(o,s,t);this.value=`rgba(${a}, ${h}, ${l}, ${this.get("alpha")/100})`}}else switch(i){case"hsl":{const a=Qe(o,s/100,t/100);this.value=`hsl(${o}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${o}, ${Math.round(s)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:a,g:h,b:l}=xe(o,s,t);this.value=`rgb(${a}, ${h}, ${l})`;break}default:this.value=tt(xe(o,s,t))}}}const io=ee({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const o=he("color-predefine"),{currentColor:s}=dt(vt),t=W(i(e.colors,e.color));J(()=>s.value,a=>{const h=new Me;h.fromString(a),t.value.forEach(l=>{l.selected=h.compare(l)})}),Ht(()=>{t.value=i(e.colors,e.color)});function r(a){e.color.fromString(e.colors[a])}function i(a,h){return a.map(l=>{const n=new Me;return n.enableAlpha=!0,n.format="rgba",n.fromString(l),n.selected=n.value===h.value,n})}return{rgbaColors:t,handleSelect:r,ns:o}}}),ro=["onClick"];function ao(e,o,s,t,r,i){return L(),I("div",{class:H(e.ns.b())},[g("div",{class:H(e.ns.e("colors"))},[(L(!0),I(ve,null,Se(e.rgbaColors,(a,h)=>(L(),I("div",{key:e.colors[h],class:H([e.ns.e("color-selector"),e.ns.is("alpha",a._alpha<100),{selected:a.selected}]),onClick:l=>e.handleSelect(h)},[g("div",{style:j({backgroundColor:a.value})},null,4)],10,ro))),128))],2)],2)}var no=ge(io,[["render",ao],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const lo=ee({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const o=he("color-svpanel"),s=Ie(),t=W(0),r=W(0),i=W("hsl(0, 100%, 50%)"),a=V(()=>{const n=e.color.get("hue"),d=e.color.get("value");return{hue:n,value:d}});function h(){const n=e.color.get("saturation"),d=e.color.get("value"),u=s.vnode.el,{clientWidth:m,clientHeight:C}=u;r.value=n*m/100,t.value=(100-d)*C/100,i.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(n){const u=s.vnode.el.getBoundingClientRect(),{clientX:m,clientY:C}=Ke(n);let p=m-u.left,f=C-u.top;p=Math.max(0,p),p=Math.min(p,u.width),f=Math.max(0,f),f=Math.min(f,u.height),r.value=p,t.value=f,e.color.set({saturation:p/u.width*100,value:100-f/u.height*100})}return J(()=>a.value,()=>{h()}),ye(()=>{Oe(s.vnode.el,{drag:n=>{l(n)},end:n=>{l(n)}}),h()}),{cursorTop:t,cursorLeft:r,background:i,colorValue:a,handleDrag:l,update:h,ns:o}}}),co=g("div",null,null,-1),ho=[co];function uo(e,o,s,t,r,i){return L(),I("div",{class:H(e.ns.b()),style:j({backgroundColor:e.background})},[g("div",{class:H(e.ns.e("white"))},null,2),g("div",{class:H(e.ns.e("black"))},null,2),g("div",{class:H(e.ns.e("cursor")),style:j({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},ho,6)],6)}var po=ge(lo,[["render",uo],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const fo=["onKeydown"],mo=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],go=ee({name:"ElColorPicker"}),vo=ee({...go,props:Qt,emits:eo,setup(e,{expose:o,emit:s}){const t=e,{t:r}=it(),i=he("color"),{formItem:a}=rt(),h=at(),l=yt(),{inputId:n,isLabeledByFormItem:d}=nt(t,{formItemContext:a}),u=W(),m=W(),C=W(),p=W(),f=W(),b=W(),{isFocused:x,handleFocus:E,handleBlur:y}=Ct(f,{beforeBlur(v){var B;return(B=p.value)==null?void 0:B.isFocusInsideContent(v)},afterBlur(){A(!1),K()}}),z=v=>{if(l.value)return Ce();E(v)};let X=!0;const O=fe(new Me({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),S=W(!1),k=W(!1),M=W(""),T=V(()=>!t.modelValue&&!k.value?"transparent":G(O,t.showAlpha)),w=V(()=>!t.modelValue&&!k.value?"":O.value),Y=V(()=>d.value?void 0:t.label||r("el.colorpicker.defaultLabel")),F=V(()=>d.value?a==null?void 0:a.labelId:void 0),te=V(()=>[i.b("picker"),i.is("disabled",l.value),i.bm("picker",h.value),i.is("focused",x.value)]);function G(v,B){if(!(v instanceof Me))throw new TypeError("color should be instance of _color Class");const{r:ne,g:je,b:De}=v.toRgb();return B?`rgba(${ne}, ${je}, ${De}, ${v.get("alpha")/100})`:`rgb(${ne}, ${je}, ${De})`}function A(v){S.value=v}const R=Fe(A,100,{leading:!0});function q(){l.value||A(!0)}function D(){R(!1),K()}function K(){re(()=>{t.modelValue?O.fromString(t.modelValue):(O.value="",re(()=>{k.value=!1}))})}function Z(){l.value||R(!S.value)}function _(){O.fromString(M.value)}function P(){const v=O.value;s(ce,v),s("change",v),t.validateEvent&&(a==null||a.validate("change").catch(B=>We())),R(!1),re(()=>{const B=new Me({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});O.compare(B)||K()})}function oe(){R(!1),s(ce,null),s("change",null),t.modelValue!==null&&t.validateEvent&&(a==null||a.validate("change").catch(v=>We())),K()}function ae(v){if(S.value&&(D(),x.value)){const B=new FocusEvent("focus",v);y(B)}}function $(v){v.preventDefault(),v.stopPropagation(),A(!1),K()}function se(v){switch(v.code){case Le.enter:case Le.space:v.preventDefault(),v.stopPropagation(),q(),b.value.focus();break;case Le.esc:$(v);break}}function ue(){f.value.focus()}function Ce(){f.value.blur()}return ye(()=>{t.modelValue&&(M.value=w.value)}),J(()=>t.modelValue,v=>{v?v&&v!==O.value&&(X=!1,O.fromString(v)):k.value=!1}),J(()=>w.value,v=>{M.value=v,X&&s("activeChange",v),X=!0}),J(()=>O.value,()=>{!t.modelValue&&!k.value&&(k.value=!0)}),J(()=>S.value,()=>{re(()=>{var v,B,ne;(v=u.value)==null||v.update(),(B=m.value)==null||B.update(),(ne=C.value)==null||ne.update()})}),pt(vt,{currentColor:w}),o({color:O,show:q,hide:D,focus:ue,blur:Ce}),(v,B)=>(L(),be(c(ht),{ref_key:"popper",ref:p,visible:S.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[c(i).be("picker","panel"),c(i).b("dropdown"),v.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${c(i).namespace.value}-zoom-in-top`,persistent:"",onHide:B[2]||(B[2]=ne=>A(!1))},{content:U(()=>[ie((L(),I("div",{onKeydown:Je($,["esc"])},[g("div",{class:H(c(i).be("dropdown","main-wrapper"))},[N(Jt,{ref_key:"hue",ref:u,class:"hue-slider",color:c(O),vertical:""},null,8,["color"]),N(po,{ref_key:"sv",ref:m,color:c(O)},null,8,["color"])],2),v.showAlpha?(L(),be(qt,{key:0,ref_key:"alpha",ref:C,color:c(O)},null,8,["color"])):Q("v-if",!0),v.predefine?(L(),be(no,{key:1,ref:"predefine",color:c(O),colors:v.predefine},null,8,["color","colors"])):Q("v-if",!0),g("div",{class:H(c(i).be("dropdown","btns"))},[g("span",{class:H(c(i).be("dropdown","value"))},[N(c(ct),{ref_key:"inputRef",ref:b,modelValue:M.value,"onUpdate:modelValue":B[0]||(B[0]=ne=>M.value=ne),"validate-event":!1,size:"small",onKeyup:Je(_,["enter"]),onBlur:_},null,8,["modelValue","onKeyup"])],2),N(c(Ve),{class:H(c(i).be("dropdown","link-btn")),text:"",size:"small",onClick:oe},{default:U(()=>[le(Ee(c(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),N(c(Ve),{plain:"",size:"small",class:H(c(i).be("dropdown","btn")),onClick:P},{default:U(()=>[le(Ee(c(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,fo)),[[c(xt),ae]])]),default:U(()=>[g("div",{id:c(n),ref_key:"triggerRef",ref:f,class:H(c(te)),role:"button","aria-label":c(Y),"aria-labelledby":c(F),"aria-description":c(r)("el.colorpicker.description",{color:v.modelValue||""}),"aria-disabled":c(l),tabindex:c(l)?-1:v.tabindex,onKeydown:se,onFocus:z,onBlur:B[1]||(B[1]=(...ne)=>c(y)&&c(y)(...ne))},[c(l)?(L(),I("div",{key:0,class:H(c(i).be("picker","mask"))},null,2)):Q("v-if",!0),g("div",{class:H(c(i).be("picker","trigger")),onClick:Z},[g("span",{class:H([c(i).be("picker","color"),c(i).is("alpha",v.showAlpha)])},[g("span",{class:H(c(i).be("picker","color-inner")),style:j({backgroundColor:c(T)})},[ie(N(c(Ze),{class:H([c(i).be("picker","icon"),c(i).is("icon-arrow-down")])},{default:U(()=>[N(c(Vt))]),_:1},8,["class"]),[[me,v.modelValue||k.value]]),ie(N(c(Ze),{class:H([c(i).be("picker","empty"),c(i).is("icon-close")])},{default:U(()=>[N(c(Wt))]),_:1},8,["class"]),[[me,!v.modelValue&&!k.value]])],6)],2)],2)],42,mo)]),_:1},8,["visible","popper-class","transition"]))}});var bo=ge(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const wo=lt(bo),bt=Symbol("sliderContextKey"),yo=$e({modelValue:{type:pe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Be,inputSize:Be,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:pe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:pe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:ut,default:"top"},marks:{type:pe(Object)},validateEvent:{type:Boolean,default:!0}}),Ne=e=>Pe(e)||It(e)&&e.every(Pe),Co={[ce]:Ne,[Re]:Ne,[Ue]:Ne},xo=(e,o,s)=>{const t=W();return ye(async()=>{e.range?(Array.isArray(e.modelValue)?(o.firstValue=Math.max(e.min,e.modelValue[0]),o.secondValue=Math.min(e.max,e.modelValue[1])):(o.firstValue=e.min,o.secondValue=e.max),o.oldValue=[o.firstValue,o.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?o.firstValue=e.min:o.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),o.oldValue=o.firstValue),Xt(window,"resize",s),await re(),s()}),{sliderWrapper:t}},ko=e=>V(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((s,t)=>s-t).filter(s=>s<=e.max&&s>=e.min).map(s=>({point:s,position:(s-e.min)*100/(e.max-e.min),mark:e.marks[s]})):[]),_o=(e,o,s)=>{const{form:t,formItem:r}=rt(),i=Ae(),a=W(),h=W(),l={firstButton:a,secondButton:h},n=V(()=>e.disabled||(t==null?void 0:t.disabled)||!1),d=V(()=>Math.min(o.firstValue,o.secondValue)),u=V(()=>Math.max(o.firstValue,o.secondValue)),m=V(()=>e.range?`${100*(u.value-d.value)/(e.max-e.min)}%`:`${100*(o.firstValue-e.min)/(e.max-e.min)}%`),C=V(()=>e.range?`${100*(d.value-e.min)/(e.max-e.min)}%`:"0%"),p=V(()=>e.vertical?{height:e.height}:{}),f=V(()=>e.vertical?{height:m.value,bottom:C.value}:{width:m.value,left:C.value}),b=()=>{i.value&&(o.sliderSize=i.value[`client${e.vertical?"Height":"Width"}`])},x=w=>{const Y=e.min+w*(e.max-e.min)/100;if(!e.range)return a;let F;return Math.abs(d.value-Y)<Math.abs(u.value-Y)?F=o.firstValue<o.secondValue?"firstButton":"secondButton":F=o.firstValue>o.secondValue?"firstButton":"secondButton",l[F]},E=w=>{const Y=x(w);return Y.value.setPosition(w),Y},y=w=>{o.firstValue=w,X(e.range?[d.value,u.value]:w)},z=w=>{o.secondValue=w,e.range&&X([d.value,u.value])},X=w=>{s(ce,w),s(Re,w)},O=async()=>{await re(),s(Ue,e.range?[d.value,u.value]:e.modelValue)},S=w=>{var Y,F,te,G,A,R;if(n.value||o.dragging)return;b();let q=0;if(e.vertical){const D=(te=(F=(Y=w.touches)==null?void 0:Y.item(0))==null?void 0:F.clientY)!=null?te:w.clientY;q=(i.value.getBoundingClientRect().bottom-D)/o.sliderSize*100}else{const D=(R=(A=(G=w.touches)==null?void 0:G.item(0))==null?void 0:A.clientX)!=null?R:w.clientX,K=i.value.getBoundingClientRect().left;q=(D-K)/o.sliderSize*100}if(!(q<0||q>100))return E(q)};return{elFormItem:r,slider:i,firstButton:a,secondButton:h,sliderDisabled:n,minValue:d,maxValue:u,runwayStyle:p,barStyle:f,resetSize:b,setPosition:E,emitChange:O,onSliderWrapperPrevent:w=>{var Y,F;((Y=l.firstButton.value)!=null&&Y.dragging||(F=l.secondButton.value)!=null&&F.dragging)&&w.preventDefault()},onSliderClick:w=>{S(w)&&O()},onSliderDown:async w=>{const Y=S(w);Y&&(await re(),Y.value.onButtonDown(w))},setFirstValue:y,setSecondValue:z}},{left:So,down:Mo,right:Eo,up:Oo,home:$o,end:Lo,pageUp:Ho,pageDown:Vo}=Le,Wo=(e,o,s)=>{const t=W(),r=W(!1),i=V(()=>o.value instanceof Function),a=V(()=>i.value&&o.value(e.modelValue)||e.modelValue),h=Fe(()=>{s.value&&(r.value=!0)},50),l=Fe(()=>{s.value&&(r.value=!1)},50);return{tooltip:t,tooltipVisible:r,formatValue:a,displayTooltip:h,hideTooltip:l}},Io=(e,o,s)=>{const{disabled:t,min:r,max:i,step:a,showTooltip:h,precision:l,sliderSize:n,formatTooltip:d,emitChange:u,resetSize:m,updateDragging:C}=dt(bt),{tooltip:p,tooltipVisible:f,formatValue:b,displayTooltip:x,hideTooltip:E}=Wo(e,d,h),y=W(),z=V(()=>`${(e.modelValue-r.value)/(i.value-r.value)*100}%`),X=V(()=>e.vertical?{bottom:z.value}:{left:z.value}),O=()=>{o.hovering=!0,x()},S=()=>{o.hovering=!1,o.dragging||E()},k=_=>{t.value||(_.preventDefault(),q(_),window.addEventListener("mousemove",D),window.addEventListener("touchmove",D),window.addEventListener("mouseup",K),window.addEventListener("touchend",K),window.addEventListener("contextmenu",K),y.value.focus())},M=_=>{t.value||(o.newPosition=Number.parseFloat(z.value)+_/(i.value-r.value)*100,Z(o.newPosition),u())},T=()=>{M(-a.value)},w=()=>{M(a.value)},Y=()=>{M(-a.value*4)},F=()=>{M(a.value*4)},te=()=>{t.value||(Z(0),u())},G=()=>{t.value||(Z(100),u())},A=_=>{let P=!0;[So,Mo].includes(_.key)?T():[Eo,Oo].includes(_.key)?w():_.key===$o?te():_.key===Lo?G():_.key===Vo?Y():_.key===Ho?F():P=!1,P&&_.preventDefault()},R=_=>{let P,oe;return _.type.startsWith("touch")?(oe=_.touches[0].clientY,P=_.touches[0].clientX):(oe=_.clientY,P=_.clientX),{clientX:P,clientY:oe}},q=_=>{o.dragging=!0,o.isClick=!0;const{clientX:P,clientY:oe}=R(_);e.vertical?o.startY=oe:o.startX=P,o.startPosition=Number.parseFloat(z.value),o.newPosition=o.startPosition},D=_=>{if(o.dragging){o.isClick=!1,x(),m();let P;const{clientX:oe,clientY:ae}=R(_);e.vertical?(o.currentY=ae,P=(o.startY-o.currentY)/n.value*100):(o.currentX=oe,P=(o.currentX-o.startX)/n.value*100),o.newPosition=o.startPosition+P,Z(o.newPosition)}},K=()=>{o.dragging&&(setTimeout(()=>{o.dragging=!1,o.hovering||E(),o.isClick||Z(o.newPosition),u()},0),window.removeEventListener("mousemove",D),window.removeEventListener("touchmove",D),window.removeEventListener("mouseup",K),window.removeEventListener("touchend",K),window.removeEventListener("contextmenu",K))},Z=async _=>{if(_===null||Number.isNaN(+_))return;_<0?_=0:_>100&&(_=100);const P=100/((i.value-r.value)/a.value);let ae=Math.round(_/P)*P*(i.value-r.value)*.01+r.value;ae=Number.parseFloat(ae.toFixed(l.value)),ae!==e.modelValue&&s(ce,ae),!o.dragging&&e.modelValue!==o.oldValue&&(o.oldValue=e.modelValue),await re(),o.dragging&&x(),p.value.updatePopper()};return J(()=>o.dragging,_=>{C(_)}),{disabled:t,button:y,tooltip:p,tooltipVisible:f,showTooltip:h,wrapperStyle:X,formatValue:b,handleMouseEnter:O,handleMouseLeave:S,onButtonDown:k,onKeyDown:A,setPosition:Z}},Xo=(e,o,s,t)=>({stops:V(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const a=(e.max-e.min)/e.step,h=100*e.step/(e.max-e.min),l=Array.from({length:a-1}).map((n,d)=>(d+1)*h);return e.range?l.filter(n=>n<100*(s.value-e.min)/(e.max-e.min)||n>100*(t.value-e.min)/(e.max-e.min)):l.filter(n=>n>100*(o.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),To=(e,o,s,t,r,i)=>{const a=n=>{r(ce,n),r(Re,n)},h=()=>e.range?![s.value,t.value].every((n,d)=>n===o.oldValue[d]):e.modelValue!==o.oldValue,l=()=>{var n,d;e.min>e.max&&$t("Slider","min should not be greater than max.");const u=e.modelValue;e.range&&Array.isArray(u)?u[1]<e.min?a([e.min,e.min]):u[0]>e.max?a([e.max,e.max]):u[0]<e.min?a([e.min,u[1]]):u[1]>e.max?a([u[0],e.max]):(o.firstValue=u[0],o.secondValue=u[1],h()&&(e.validateEvent&&((n=i==null?void 0:i.validate)==null||n.call(i,"change").catch(m=>We())),o.oldValue=u.slice())):!e.range&&typeof u=="number"&&!Number.isNaN(u)&&(u<e.min?a(e.min):u>e.max?a(e.max):(o.firstValue=u,h()&&(e.validateEvent&&((d=i==null?void 0:i.validate)==null||d.call(i,"change").catch(m=>We())),o.oldValue=u)))};l(),J(()=>o.dragging,n=>{n||l()}),J(()=>e.modelValue,(n,d)=>{o.dragging||Array.isArray(n)&&Array.isArray(d)&&n.every((u,m)=>u===d[m])&&o.firstValue===n[0]&&o.secondValue===n[1]||l()},{deep:!0}),J(()=>[e.min,e.max],()=>{l()})},Yo=$e({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:ut,default:"top"}}),No={[ce]:e=>Pe(e)},Bo=["tabindex"],Po=ee({name:"ElSliderButton"}),Ao=ee({...Po,props:Yo,emits:No,setup(e,{expose:o,emit:s}){const t=e,r=he("slider"),i=fe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:t.modelValue}),{disabled:a,button:h,tooltip:l,showTooltip:n,tooltipVisible:d,wrapperStyle:u,formatValue:m,handleMouseEnter:C,handleMouseLeave:p,onButtonDown:f,onKeyDown:b,setPosition:x}=Io(t,i,s),{hovering:E,dragging:y}=ze(i);return o({onButtonDown:f,onKeyDown:b,setPosition:x,hovering:E,dragging:y}),(z,X)=>(L(),I("div",{ref_key:"button",ref:h,class:H([c(r).e("button-wrapper"),{hover:c(E),dragging:c(y)}]),style:j(c(u)),tabindex:c(a)?-1:0,onMouseenter:X[0]||(X[0]=(...O)=>c(C)&&c(C)(...O)),onMouseleave:X[1]||(X[1]=(...O)=>c(p)&&c(p)(...O)),onMousedown:X[2]||(X[2]=(...O)=>c(f)&&c(f)(...O)),onTouchstart:X[3]||(X[3]=(...O)=>c(f)&&c(f)(...O)),onFocus:X[4]||(X[4]=(...O)=>c(C)&&c(C)(...O)),onBlur:X[5]||(X[5]=(...O)=>c(p)&&c(p)(...O)),onKeydown:X[6]||(X[6]=(...O)=>c(b)&&c(b)(...O))},[N(c(ht),{ref_key:"tooltip",ref:l,visible:c(d),placement:z.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":z.tooltipClass,disabled:!c(n),persistent:""},{content:U(()=>[g("span",null,Ee(c(m)),1)]),default:U(()=>[g("div",{class:H([c(r).e("button"),{hover:c(E),dragging:c(y)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,Bo))}});var st=ge(Ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const zo=$e({mark:{type:pe([String,Object]),default:void 0}});var Fo=ee({name:"ElSliderMarker",props:zo,setup(e){const o=he("slider"),s=V(()=>_e(e.mark)?e.mark:e.mark.label),t=V(()=>_e(e.mark)?void 0:e.mark.style);return()=>Tt("div",{class:o.e("marks-text"),style:t.value},s.value)}});const Uo=["id","role","aria-label","aria-labelledby"],Ro={key:1},Ko=ee({name:"ElSlider"}),jo=ee({...Ko,props:yo,emits:Co,setup(e,{expose:o,emit:s}){const t=e,r=he("slider"),{t:i}=it(),a=fe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:l,firstButton:n,secondButton:d,sliderDisabled:u,minValue:m,maxValue:C,runwayStyle:p,barStyle:f,resetSize:b,emitChange:x,onSliderWrapperPrevent:E,onSliderClick:y,onSliderDown:z,setFirstValue:X,setSecondValue:O}=_o(t,a,s),{stops:S,getStopStyle:k}=Xo(t,a,m,C),{inputId:M,isLabeledByFormItem:T}=nt(t,{formItemContext:h}),w=at(),Y=V(()=>t.inputSize||w.value),F=V(()=>t.label||i("el.slider.defaultLabel",{min:t.min,max:t.max})),te=V(()=>t.range?t.rangeStartLabel||i("el.slider.defaultRangeStartLabel"):F.value),G=V(()=>t.formatValueText?t.formatValueText(_.value):`${_.value}`),A=V(()=>t.rangeEndLabel||i("el.slider.defaultRangeEndLabel")),R=V(()=>t.formatValueText?t.formatValueText(P.value):`${P.value}`),q=V(()=>[r.b(),r.m(w.value),r.is("vertical",t.vertical),{[r.m("with-input")]:t.showInput}]),D=ko(t);To(t,a,m,C,s,h);const K=V(()=>{const $=[t.min,t.max,t.step].map(se=>{const ue=`${se}`.split(".")[1];return ue?ue.length:0});return Math.max.apply(null,$)}),{sliderWrapper:Z}=xo(t,a,b),{firstValue:_,secondValue:P,sliderSize:oe}=ze(a),ae=$=>{a.dragging=$};return pt(bt,{...ze(t),sliderSize:oe,disabled:u,precision:K,emitChange:x,resetSize:b,updateDragging:ae}),o({onSliderClick:y}),($,se)=>{var ue,Ce;return L(),I("div",{id:$.range?c(M):void 0,ref_key:"sliderWrapper",ref:Z,class:H(c(q)),role:$.range?"group":void 0,"aria-label":$.range&&!c(T)?c(F):void 0,"aria-labelledby":$.range&&c(T)?(ue=c(h))==null?void 0:ue.labelId:void 0,onTouchstart:se[2]||(se[2]=(...v)=>c(E)&&c(E)(...v)),onTouchmove:se[3]||(se[3]=(...v)=>c(E)&&c(E)(...v))},[g("div",{ref_key:"slider",ref:l,class:H([c(r).e("runway"),{"show-input":$.showInput&&!$.range},c(r).is("disabled",c(u))]),style:j(c(p)),onMousedown:se[0]||(se[0]=(...v)=>c(z)&&c(z)(...v)),onTouchstart:se[1]||(se[1]=(...v)=>c(z)&&c(z)(...v))},[g("div",{class:H(c(r).e("bar")),style:j(c(f))},null,6),N(st,{id:$.range?void 0:c(M),ref_key:"firstButton",ref:n,"model-value":c(_),vertical:$.vertical,"tooltip-class":$.tooltipClass,placement:$.placement,role:"slider","aria-label":$.range||!c(T)?c(te):void 0,"aria-labelledby":!$.range&&c(T)?(Ce=c(h))==null?void 0:Ce.labelId:void 0,"aria-valuemin":$.min,"aria-valuemax":$.range?c(P):$.max,"aria-valuenow":c(_),"aria-valuetext":c(G),"aria-orientation":$.vertical?"vertical":"horizontal","aria-disabled":c(u),"onUpdate:modelValue":c(X)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),$.range?(L(),be(st,{key:0,ref_key:"secondButton",ref:d,"model-value":c(P),vertical:$.vertical,"tooltip-class":$.tooltipClass,placement:$.placement,role:"slider","aria-label":c(A),"aria-valuemin":c(_),"aria-valuemax":$.max,"aria-valuenow":c(P),"aria-valuetext":c(R),"aria-orientation":$.vertical?"vertical":"horizontal","aria-disabled":c(u),"onUpdate:modelValue":c(O)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Q("v-if",!0),$.showStops?(L(),I("div",Ro,[(L(!0),I(ve,null,Se(c(S),(v,B)=>(L(),I("div",{key:B,class:H(c(r).e("stop")),style:j(c(k)(v))},null,6))),128))])):Q("v-if",!0),c(D).length>0?(L(),I(ve,{key:2},[g("div",null,[(L(!0),I(ve,null,Se(c(D),(v,B)=>(L(),I("div",{key:B,style:j(c(k)(v.position)),class:H([c(r).e("stop"),c(r).e("marks-stop")])},null,6))),128))]),g("div",{class:H(c(r).e("marks"))},[(L(!0),I(ve,null,Se(c(D),(v,B)=>(L(),be(c(Fo),{key:B,mark:v.mark,style:j(c(k)(v.position))},null,8,["mark","style"]))),128))],2)],64)):Q("v-if",!0)],38),$.showInput&&!$.range?(L(),be(c(Ot),{key:0,ref:"input","model-value":c(_),class:H(c(r).e("input")),step:$.step,disabled:c(u),controls:$.showInputControls,min:$.min,max:$.max,debounce:$.debounce,size:c(Y),"onUpdate:modelValue":c(X),onChange:c(x)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Q("v-if",!0)],42,Uo)}}});var Do=ge(jo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const qo=lt(Do);const wt={};wt.getData=e=>new Promise((o,s)=>{let t={};Zo(e).then(r=>{t.arrayBuffer=r;try{t.orientation=es(r)}catch{t.orientation=-1}o(t)}).catch(r=>{s(r)})});function Zo(e){let o=null;return new Promise((s,t)=>{if(e.src)if(/^data\:/i.test(e.src))o=Jo(e.src),s(o);else if(/^blob\:/i.test(e.src)){var r=new FileReader;r.onload=function(a){o=a.target.result,s(o)},Go(e.src,function(a){r.readAsArrayBuffer(a)})}else{var i=new XMLHttpRequest;i.onload=function(){if(this.status==200||this.status===0)o=i.response,s(o);else throw"Could not load image";i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else t("img error")})}function Go(e,o){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(t){(this.status==200||this.status===0)&&o(this.response)},s.send()}function Jo(e,o){o=o||e.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var s=atob(e),t=s.length%2==0?s.length:s.length+1,r=new ArrayBuffer(t),i=new Uint16Array(r),a=0;a<t;a++)i[a]=s.charCodeAt(a);return r}function Qo(e,o,s){var t="",r;for(r=o,s+=o;r<s;r++)t+=String.fromCharCode(e.getUint8(r));return t}function es(e){var o=new DataView(e),s=o.byteLength,t,r,i,a,h,l,n,d,u,m;if(o.getUint8(0)===255&&o.getUint8(1)===216)for(u=2;u<s;){if(o.getUint8(u)===255&&o.getUint8(u+1)===225){n=u;break}u++}if(n&&(r=n+4,i=n+10,Qo(o,r,4)==="Exif"&&(l=o.getUint16(i),h=l===18761,(h||l===19789)&&o.getUint16(i+2,h)===42&&(a=o.getUint32(i+4,h),a>=8&&(d=i+a)))),d){for(s=o.getUint16(d,h),m=0;m<s;m++)if(u=d+m*12+2,o.getUint16(u,h)===274){u+=8,t=o.getUint16(u,h);break}}return t}const ts=(e,o)=>{const s=e.__vccOpts||e;for(const[t,r]of o)s[t]=r;return s},os=ee({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10,validator:function(e){return Array.isArray(e)?Number(e[0])>=0&&Number(e[1])>=0:Number(e)>=0}},fillColor:{type:String,default:""}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let o=1;this.high&&!this.full&&(o=window.devicePixelRatio),this.enlarge!==1&!this.full&&(o=Math.abs(Number(this.enlarge))),e.width=e.width*o,e.height=e.height*o,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE(){return!!window.ActiveXObject||"ActiveXObject"in window},passive(){return this.isIE?null:{passive:!1}}},watch:{img(){this.checkedImg()},imgs(e){e!==""&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,o){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),this.autoCrop?this.goAutoCrop(this.cropW,this.cropH):(this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var o=navigator.userAgent.split(" "),s="";let t=0;const r=new RegExp(e,"i");for(var i=0;i<o.length;i++)r.test(o[i])&&(s=o[i]);return s?t=s.split("/")[1].split("."):t=["0","0","0"],t},checkOrientationImage(e,o,s,t){if(this.getVersion("chrome")[0]>=81)o=-1;else if(this.getVersion("safari")[0]>=605){const a=this.getVersion("version");a[0]>13&&a[1]>1&&(o=-1)}else{const a=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(a){let h=a[1];h=h.split("_"),(h[0]>13||h[0]>=13&&h[1]>=4)&&(o=-1)}}let r=document.createElement("canvas"),i=r.getContext("2d");switch(i.save(),o){case 2:r.width=s,r.height=t,i.translate(s,0),i.scale(-1,1);break;case 3:r.width=s,r.height=t,i.translate(s/2,t/2),i.rotate(180*Math.PI/180),i.translate(-s/2,-t/2);break;case 4:r.width=s,r.height=t,i.translate(0,t),i.scale(1,-1);break;case 5:r.height=s,r.width=t,i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:r.width=t,r.height=s,i.translate(t/2,s/2),i.rotate(90*Math.PI/180),i.translate(-s/2,-t/2);break;case 7:r.height=s,r.width=t,i.rotate(.5*Math.PI),i.translate(s,-t),i.scale(-1,1);break;case 8:r.height=s,r.width=t,i.translate(t/2,s/2),i.rotate(-90*Math.PI/180),i.translate(-s/2,-t/2);break;default:r.width=s,r.height=t}i.drawImage(e,0,0,s,t),i.restore(),r.toBlob(a=>{let h=URL.createObjectURL(a);URL.revokeObjectURL(this.imgs),this.imgs=h},"image/"+this.outputType,1)},checkedImg(){if(this.img===null||this.img===""){this.imgs="",this.clearCrop();return}this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();let e=new Image;if(e.onload=()=>{if(this.img==="")return this.$emit("img-load",new Error("图片不能为空")),!1;let s=e.width,t=e.height;wt.getData(e).then(r=>{this.orientation=r.orientation||1;let i=Number(this.maxImgSize);if(!this.orientation&&s<i&t<i){this.imgs=this.img;return}s>i&&(t=t/s*i,s=i),t>i&&(s=s/t*i,t=i),this.checkOrientationImage(e,this.orientation,s,t)}).catch(r=>{this.$emit("img-load","error"),this.$emit("img-load-error",r)})},e.onerror=s=>{this.$emit("img-load","error"),this.$emit("img-load-error",s)},this.img.substr(0,4)!=="data"&&(e.crossOrigin=""),this.isIE){var o=new XMLHttpRequest;o.onload=function(){var s=URL.createObjectURL(this.response);e.src=s},o.open("GET",this.img,!0),o.responseType="blob",o.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),e.touches.length==2&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let o=this.scale;var s={x:this.touches[0].clientX,y:this.touches[0].clientY},t={x:e.touches[0].clientX,y:e.touches[0].clientY},r={x:this.touches[1].clientX,y:this.touches[1].clientY},i={x:e.touches[1].clientX,y:e.touches[1].clientY},a=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),h=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),l=h-a,n=1;n=n/this.trueWidth>n/this.trueHeight?n/this.trueHeight:n/this.trueWidth,n=n>.1?.1:n;var d=n*l;if(!this.touchNow){if(this.touchNow=!0,l>0?o+=Math.abs(d):l<0&&o>Math.abs(d)&&(o-=Math.abs(d)),this.touches=e.touches,setTimeout(()=>{this.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,o))return!1;this.scale=o}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&e.touches.length===2)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let o="clientX"in e?e.clientX:e.touches[0].clientX,s="clientY"in e?e.clientY:e.touches[0].clientY,t,r;t=o-this.moveX,r=s-this.moveY,this.$nextTick(()=>{if(this.centerBox){let i=this.getImgAxis(t,r,this.scale),a=this.getCropAxis(),h=this.trueHeight*this.scale,l=this.trueWidth*this.scale,n,d,u,m;switch(this.rotate){case 1:case-1:case 3:case-3:n=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(h-l)/2,d=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(l-h)/2,u=n-h+this.cropW,m=d-l+this.cropH;break;default:n=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,d=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,u=n-l+this.cropW,m=d-h+this.cropH;break}i.x1>=a.x1&&(t=n),i.y1>=a.y1&&(r=d),i.x2<=a.x2&&(t=u),i.y2<=a.y2&&(r=m)}this.x=t,this.y=r,this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})})},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let o=this.scale;var s=e.deltaY||e.wheelDelta,t=navigator.userAgent.indexOf("Firefox");s=t>0?s*30:s,this.isIE&&(s=-s);var r=this.coe;r=r/this.trueWidth>r/this.trueHeight?r/this.trueHeight:r/this.trueWidth;var i=r*s;i<0?o+=Math.abs(i):o>Math.abs(i)&&(o-=Math.abs(i));let a=i<0?"add":"reduce";if(a!==this.coeStatus&&(this.coeStatus=a,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(()=>{this.scaling=!1,this.coe=this.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,o))return!1;this.scale=o},changeScale(e){let o=this.scale;e=e||1;var s=20;if(s=s/this.trueWidth>s/this.trueHeight?s/this.trueHeight:s/this.trueWidth,e=e*s,e>0?o+=Math.abs(e):o>Math.abs(e)&&(o-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,o))return!1;this.scale=o},createCrop(e){e.preventDefault();var o="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,s="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick(()=>{var t=o-this.cropX,r=s-this.cropY;if(t>0?(this.cropW=t+this.cropChangeX>this.w?this.w-this.cropChangeX:t,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(t)>this.w?this.cropChangeX:Math.abs(t),this.cropOffsertX=this.cropChangeX+t>0?this.cropChangeX+t:0),!this.fixed)r>0?(this.cropH=r+this.cropChangeY>this.h?this.h-this.cropChangeY:r,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(r)>this.h?this.cropChangeY:Math.abs(r),this.cropOffsertY=this.cropChangeY+r>0?this.cropChangeY+r:0);else{var i=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];i+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],t>0?this.cropOffsertX=this.cropChangeX:this.cropOffsertX=this.cropChangeX-this.cropW):this.cropH=i,this.cropOffsertY=this.cropOffsertY}})},changeCropSize(e,o,s,t,r){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=o,this.canChangeY=s,this.changeCropTypeX=t,this.changeCropTypeY=r,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var o="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,s="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let t=this.w,r=this.h,i=0,a=0;if(this.centerBox){let n=this.getImgAxis(),d=n.x2,u=n.y2;i=n.x1>0?n.x1:0,a=n.y1>0?n.y1:0,t>d&&(t=d),r>u&&(r=u)}const[h,l]=this.checkCropLimitSize();this.$nextTick(()=>{var n=o-this.cropX,d=s-this.cropY;if(this.canChangeX&&(this.changeCropTypeX===1?this.cropOldW-n<h?(this.cropW=h,this.cropOffsertX=this.cropOldW+this.cropChangeX-i-h):this.cropOldW-n>0?(this.cropW=t-this.cropChangeX-n<=t-i?this.cropOldW-n:this.cropOldW+this.cropChangeX-i,this.cropOffsertX=t-this.cropChangeX-n<=t-i?this.cropChangeX+n:i):(this.cropW=Math.abs(n)+this.cropChangeX<=t?Math.abs(n)-this.cropOldW:t-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):this.changeCropTypeX===2&&(this.cropOldW+n<h?this.cropW=h:this.cropOldW+n>0?(this.cropW=this.cropOldW+n+this.cropOffsertX<=t?this.cropOldW+n:t-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=t-this.cropChangeX+Math.abs(n+this.cropOldW)<=t-i?Math.abs(n+this.cropOldW):this.cropChangeX-i,this.cropOffsertX=t-this.cropChangeX+Math.abs(n+this.cropOldW)<=t-i?this.cropChangeX-Math.abs(n+this.cropOldW):i))),this.canChangeY&&(this.changeCropTypeY===1?this.cropOldH-d<l?(this.cropH=l,this.cropOffsertY=this.cropOldH+this.cropChangeY-a-l):this.cropOldH-d>0?(this.cropH=r-this.cropChangeY-d<=r-a?this.cropOldH-d:this.cropOldH+this.cropChangeY-a,this.cropOffsertY=r-this.cropChangeY-d<=r-a?this.cropChangeY+d:a):(this.cropH=Math.abs(d)+this.cropChangeY<=r?Math.abs(d)-this.cropOldH:r-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):this.changeCropTypeY===2&&(this.cropOldH+d<l?this.cropH=l:this.cropOldH+d>0?(this.cropH=this.cropOldH+d+this.cropOffsertY<=r?this.cropOldH+d:r-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=r-this.cropChangeY+Math.abs(d+this.cropOldH)<=r-a?Math.abs(d+this.cropOldH):this.cropChangeY-a,this.cropOffsertY=r-this.cropChangeY+Math.abs(d+this.cropOldH)<=r-a?this.cropChangeY-Math.abs(d+this.cropOldH):a))),this.canChangeX&&this.fixed){var u=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];u<l?(this.cropH=l,this.cropW=this.fixedNumber[0]*l/this.fixedNumber[1],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):u+this.cropOffsertY>r?(this.cropH=r-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):this.cropH=u}if(this.canChangeY&&this.fixed){var m=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];m<h?(this.cropW=h,this.cropH=this.fixedNumber[1]*h/this.fixedNumber[0],this.cropOffsertY=this.cropOldH+this.cropChangeY-this.cropH):m+this.cropOffsertX>t?(this.cropW=t-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=m}})},checkCropLimitSize(){let{cropW:e,cropH:o,limitMinSize:s}=this,t=new Array;return Array.isArray(s)?t=s:t=[s,s],e=parseFloat(t[0]),o=parseFloat(t[1]),[e,o]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},calculateSize(e,o,s,t,r,i){const a=e/o;let h=r,l=i;return h<s&&(h=s,l=Math.ceil(h/a)),l<t&&(l=t,h=Math.ceil(l*a),h<s&&(h=s,l=Math.ceil(h/a))),h<r&&(h=r,l=Math.ceil(h/a)),l<i&&(l=i,h=Math.ceil(l*a)),{width:h,height:l}},endCrop(){this.cropW===0&&this.cropH===0&&(this.cropping=!1);let[e,o]=this.checkCropLimitSize();const{width:s,height:t}=this.fixed?this.calculateSize(this.fixedNumber[0],this.fixedNumber[1],e,o,this.cropW,this.cropH):{width:e,height:o};s>this.cropW&&(this.cropW=s,this.cropOffsertX+s>this.w&&(this.cropOffsertX=this.w-s)),t>this.cropH&&(this.cropH=t,this.cropOffsertY+t>this.h&&(this.cropOffsertY=this.h-t)),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&e.touches.length===2)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let o="clientX"in e?e.clientX:e.touches[0].clientX,s="clientY"in e?e.clientY:e.touches[0].clientY,t,r;t=o-this.cropOffsertX,r=s-this.cropOffsertY,this.cropX=t,this.cropY=r,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,o){let s=0,t=0;e&&(e.preventDefault(),s="clientX"in e?e.clientX:e.touches[0].clientX,t="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick(()=>{let r,i,a=s-this.cropX,h=t-this.cropY;if(o&&(a=this.cropOffsertX,h=this.cropOffsertY),a<=0?r=0:a+this.cropW>this.w?r=this.w-this.cropW:r=a,h<=0?i=0:h+this.cropH>this.h?i=this.h-this.cropH:i=h,this.centerBox){let l=this.getImgAxis();r<=l.x1&&(r=l.x1),r+this.cropW>l.x2&&(r=l.x2-this.cropW),i<=l.y1&&(i=l.y1),i+this.cropH>l.y2&&(i=l.y2-this.cropH)}this.cropOffsertX=r,this.cropOffsertY=i,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})})},getImgAxis(e,o,s){e=e||this.x,o=o||this.y,s=s||this.scale;let t={x1:0,x2:0,y1:0,y2:0},r=this.trueWidth*s,i=this.trueHeight*s;switch(this.rotate){case 0:t.x1=e+this.trueWidth*(1-s)/2,t.x2=t.x1+this.trueWidth*s,t.y1=o+this.trueHeight*(1-s)/2,t.y2=t.y1+this.trueHeight*s;break;case 1:case-1:case 3:case-3:t.x1=e+this.trueWidth*(1-s)/2+(r-i)/2,t.x2=t.x1+this.trueHeight*s,t.y1=o+this.trueHeight*(1-s)/2+(i-r)/2,t.y2=t.y1+this.trueWidth*s;break;default:t.x1=e+this.trueWidth*(1-s)/2,t.x2=t.x1+this.trueWidth*s,t.y1=o+this.trueHeight*(1-s)/2,t.y2=t.y1+this.trueHeight*s;break}return t},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let o=document.createElement("canvas"),s=new Image,t=this.rotate,r=this.trueWidth,i=this.trueHeight,a=this.cropOffsertX,h=this.cropOffsertY;s.onload=()=>{if(this.cropW!==0){let d=o.getContext("2d"),u=1;this.high&!this.full&&(u=window.devicePixelRatio),this.enlarge!==1&!this.full&&(u=Math.abs(Number(this.enlarge)));let m=this.cropW*u,C=this.cropH*u,p=r*this.scale*u,f=i*this.scale*u,b=(this.x-a+this.trueWidth*(1-this.scale)/2)*u,x=(this.y-h+this.trueHeight*(1-this.scale)/2)*u;switch(n(m,C),d.save(),this.fillColor&&(d.fillStyle=this.fillColor,d.fillRect(0,0,o.width,o.height)),t){case 0:this.full?(n(m/this.scale,C/this.scale),d.drawImage(s,b/this.scale,x/this.scale,p/this.scale,f/this.scale)):d.drawImage(s,b,x,p,f);break;case 1:case-3:this.full?(n(m/this.scale,C/this.scale),b=b/this.scale+(p/this.scale-f/this.scale)/2,x=x/this.scale+(f/this.scale-p/this.scale)/2,d.rotate(t*90*Math.PI/180),d.drawImage(s,x,-b-f/this.scale,p/this.scale,f/this.scale)):(b=b+(p-f)/2,x=x+(f-p)/2,d.rotate(t*90*Math.PI/180),d.drawImage(s,x,-b-f,p,f));break;case 2:case-2:this.full?(n(m/this.scale,C/this.scale),d.rotate(t*90*Math.PI/180),b=b/this.scale,x=x/this.scale,d.drawImage(s,-b-p/this.scale,-x-f/this.scale,p/this.scale,f/this.scale)):(d.rotate(t*90*Math.PI/180),d.drawImage(s,-b-p,-x-f,p,f));break;case 3:case-1:this.full?(n(m/this.scale,C/this.scale),b=b/this.scale+(p/this.scale-f/this.scale)/2,x=x/this.scale+(f/this.scale-p/this.scale)/2,d.rotate(t*90*Math.PI/180),d.drawImage(s,-x-p/this.scale,b,p/this.scale,f/this.scale)):(b=b+(p-f)/2,x=x+(f-p)/2,d.rotate(t*90*Math.PI/180),d.drawImage(s,-x-p,b,p,f));break;default:this.full?(n(m/this.scale,C/this.scale),d.drawImage(s,b/this.scale,x/this.scale,p/this.scale,f/this.scale)):d.drawImage(s,b,x,p,f)}d.restore()}else{let d=r*this.scale,u=i*this.scale,m=o.getContext("2d");switch(m.save(),this.fillColor&&(m.fillStyle=this.fillColor,m.fillRect(0,0,o.width,o.height)),t){case 0:n(d,u),m.drawImage(s,0,0,d,u);break;case 1:case-3:n(u,d),m.rotate(t*90*Math.PI/180),m.drawImage(s,0,-u,d,u);break;case 2:case-2:n(d,u),m.rotate(t*90*Math.PI/180),m.drawImage(s,-d,-u,d,u);break;case 3:case-1:n(u,d),m.rotate(t*90*Math.PI/180),m.drawImage(s,-d,0,d,u);break;default:n(d,u),m.drawImage(s,0,0,d,u)}m.restore()}e(o)};var l=this.img.substr(0,4);l!=="data"&&(s.crossOrigin="Anonymous"),s.src=this.imgs;function n(d,u){o.width=Math.round(d),o.height=Math.round(u)}},getCropData(e){this.getCropChecked(o=>{e(o.toDataURL("image/"+this.outputType,this.outputSize))})},getCropBlob(e){this.getCropChecked(o=>{o.toBlob(s=>e(s),"image/"+this.outputType,this.outputSize)})},showPreview(){if(this.isCanShow)this.isCanShow=!1,setTimeout(()=>{this.isCanShow=!0},16);else return!1;let e=this.cropW,o=this.cropH,s=this.scale;var t={};t.div={width:`${e}px`,height:`${o}px`};let r=(this.x-this.cropOffsertX)/s,i=(this.y-this.cropOffsertY)/s,a=0;t.w=e,t.h=o,t.url=this.imgs,t.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${s})translate3d(${r}px, ${i}px, ${a}px)rotateZ(${this.rotate*90}deg)`},t.html=`
      <div class="show-preview" style="width: ${t.w}px; height: ${t.h}px,; overflow: hidden">
        <div style="width: ${e}px; height: ${o}px">
          <img src=${t.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:
          scale(${s})translate3d(${r}px, ${i}px, ${a}px)rotateZ(${this.rotate*90}deg)">
        </div>
      </div>`,this.$emit("real-time",t)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick(()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),setTimeout(()=>{this.showPreview()},20)})},e.onerror=()=>{this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,o=this.trueWidth,s=this.trueHeight;const t=this.mode.split(" ");switch(t[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":o=this.w,e=o/this.trueWidth,s=s*e,s<this.h&&(s=this.h,e=s/this.trueHeight);break;default:try{let r=t[0];if(r.search("px")!==-1){r=r.replace("px",""),o=parseFloat(r);const i=o/this.trueWidth;let a=1,h=t[1];h.search("px")!==-1&&(h=h.replace("px",""),s=parseFloat(h),a=s/this.trueHeight),e=Math.min(i,a)}if(r.search("%")!==-1&&(r=r.replace("%",""),o=parseFloat(r)/100*this.w,e=o/this.trueWidth),t.length===2&&r==="auto"){let i=t[1];i.search("px")!==-1&&(i=i.replace("px",""),s=parseFloat(i),e=s/this.trueHeight),i.search("%")!==-1&&(i=i.replace("%",""),s=parseFloat(i)/100*this.h,e=s/this.trueHeight)}}catch{e=1}}return e},goAutoCrop(e,o){if(this.imgs===""||this.imgs===null)return;this.clearCrop(),this.cropping=!0;let s=this.w,t=this.h;if(this.centerBox){const a=Math.abs(this.rotate)%2>0;let h=(a?this.trueHeight:this.trueWidth)*this.scale,l=(a?this.trueWidth:this.trueHeight)*this.scale;s=h<s?h:s,t=l<t?l:t}var r=e||parseFloat(this.autoCropWidth),i=o||parseFloat(this.autoCropHeight);(r===0||i===0)&&(r=s*.8,i=t*.8),r=r>s?s:r,i=i>t?t:i,this.fixed&&(i=r/this.fixedNumber[0]*this.fixedNumber[1]),i>this.h&&(i=this.h,r=i/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(r,i)},changeCrop(e,o){if(this.centerBox){let s=this.getImgAxis();e>s.x2-s.x1&&(e=s.x2-s.x1,o=e/this.fixedNumber[0]*this.fixedNumber[1]),o>s.y2-s.y1&&(o=s.y2-s.y1,e=o/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=o,this.checkCropLimitSize(),this.$nextTick(()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)})},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick(()=>{this.checkedImg()})},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,o,s){e=e||this.x,o=o||this.y,s=s||this.scale;let t=!0;if(this.centerBox){let r=this.getImgAxis(e,o,s),i=this.getCropAxis();r.x1>=i.x1&&(t=!1),r.x2<=i.x2&&(t=!1),r.y1>=i.y1&&(t=!1),r.y2<=i.y2&&(t=!1)}return t}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";let e=this;var o=navigator.userAgent;this.isIOS=!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(s,t,r){for(var i=atob(this.toDataURL(t,r).split(",")[1]),a=i.length,h=new Uint8Array(a),l=0;l<a;l++)h[l]=i.charCodeAt(l);s(new Blob([h],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},unmounted(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}}),ss={key:0,class:"cropper-box"},is=["src"],rs={class:"cropper-view-box"},as=["src"],ns={key:1};function ls(e,o,s,t,r,i){return L(),I("div",{class:"vue-cropper",ref:"cropper",onMouseover:o[28]||(o[28]=(...a)=>e.scaleImg&&e.scaleImg(...a)),onMouseout:o[29]||(o[29]=(...a)=>e.cancelScale&&e.cancelScale(...a))},[e.imgs?(L(),I("div",ss,[ie(g("div",{class:"cropper-box-canvas",style:j({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"})},[g("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,is)],4),[[me,!e.loading]])])):Q("",!0),g("div",{class:H(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:o[0]||(o[0]=(...a)=>e.startMove&&e.startMove(...a)),onTouchstart:o[1]||(o[1]=(...a)=>e.startMove&&e.startMove(...a))},null,34),ie(g("div",{class:"cropper-crop-box",style:j({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[g("span",rs,[g("img",{style:j({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,as)]),g("span",{class:"cropper-face cropper-move",onMousedown:o[2]||(o[2]=(...a)=>e.cropMove&&e.cropMove(...a)),onTouchstart:o[3]||(o[3]=(...a)=>e.cropMove&&e.cropMove(...a))},null,32),e.info?(L(),I("span",{key:0,class:"crop-info",style:j({top:e.cropInfo.top})},Ee(e.cropInfo.width)+" × "+Ee(e.cropInfo.height),5)):Q("",!0),e.fixedBox?Q("",!0):(L(),I("span",ns,[g("span",{class:"crop-line line-w",onMousedown:o[4]||(o[4]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:o[5]||(o[5]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),g("span",{class:"crop-line line-a",onMousedown:o[6]||(o[6]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:o[7]||(o[7]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),g("span",{class:"crop-line line-s",onMousedown:o[8]||(o[8]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:o[9]||(o[9]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),g("span",{class:"crop-line line-d",onMousedown:o[10]||(o[10]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:o[11]||(o[11]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),g("span",{class:"crop-point point1",onMousedown:o[12]||(o[12]=a=>e.changeCropSize(a,!0,!0,1,1)),onTouchstart:o[13]||(o[13]=a=>e.changeCropSize(a,!0,!0,1,1))},null,32),g("span",{class:"crop-point point2",onMousedown:o[14]||(o[14]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:o[15]||(o[15]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),g("span",{class:"crop-point point3",onMousedown:o[16]||(o[16]=a=>e.changeCropSize(a,!0,!0,2,1)),onTouchstart:o[17]||(o[17]=a=>e.changeCropSize(a,!0,!0,2,1))},null,32),g("span",{class:"crop-point point4",onMousedown:o[18]||(o[18]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:o[19]||(o[19]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),g("span",{class:"crop-point point5",onMousedown:o[20]||(o[20]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:o[21]||(o[21]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),g("span",{class:"crop-point point6",onMousedown:o[22]||(o[22]=a=>e.changeCropSize(a,!0,!0,1,2)),onTouchstart:o[23]||(o[23]=a=>e.changeCropSize(a,!0,!0,1,2))},null,32),g("span",{class:"crop-point point7",onMousedown:o[24]||(o[24]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:o[25]||(o[25]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),g("span",{class:"crop-point point8",onMousedown:o[26]||(o[26]=a=>e.changeCropSize(a,!0,!0,2,2)),onTouchstart:o[27]||(o[27]=a=>e.changeCropSize(a,!0,!0,2,2))},null,32)]))],4),[[me,e.cropping]])],544)}const cs=ts(os,[["render",ls],["__scopeId","data-v-69939069"]]);const hs=e=>(mt("data-v-55dfce27"),e=e(),gt(),e),us={class:"conts","element-loading-background":"#fff","element-loading-text":"解析中",style:{height:"450px"}},ds={class:"look_img"},ps=["src"],fs={class:"imgs_list_box"},ms={class:"imgs_list"},gs=["src"],vs={class:"slider-dfl"},bs={"element-loading-background":"#fff","element-loading-text":"解析中",style:{height:"450px"}},ws={key:0,class:"conts_right"},ys={class:"l"},Cs=["innerHTML"],xs={class:"r"},ks={class:"dialog-footer"},_s={class:"bottom_btn"},Ss={class:"l"},Ms=hs(()=>g("span",null,"选择本地封面",-1)),Es={class:"r"},Os={__name:"videoCropper",props:{isShow:{type:Boolean,default:()=>!0},file:{type:Object,default:()=>({})}},emits:["closeDialog","confirmImg"],setup(e,{emit:o}){const s=o;let t=e;const r=W(!1),i=W("one"),a=W(0),h=W({}),l=fe({url:"",urlTwo:"",blob:{},img_list:[],videoTime:0,oldVideoFile:{}}),n=fe({img:"",outputSize:1,outputType:"jpeg",info:!0,canScale:!0,autoCrop:!0,autoCropWidth:192,autoCropHeight:108,fixedBox:!1,fixed:!1,fixedNumber:[16,9],canMove:!0,canMoveBox:!0,original:!0,centerBox:!1,infoTrue:!0,full:!1,enlarge:"10",mode:"contain"});J([()=>t.file,()=>t.isShow],(S,k)=>{t.isShow==!0&&t.file.type?t.file.type.includes("video")?S[0].name!=l.oldVideoFile.name&&S[0].size!=l.oldVideoFile.size&&(r.value=!0,y.loadings=!0,i.value="one",d()):(ke({message:"请选择视频格式的文件",grouping:!0,type:"error"}),s("closeDialog",!1)):t.isShow==!0&&(ke({message:"请选择视频格式的文件",grouping:!0,type:"error"}),s("closeDialog",!1))});const d=()=>{l.url="",l.blob={},l.img_list=[],l.videoTime=0,l.oldVideoFile=t.file;let S=new FileReader;S.onload=function(k){let M=document.createElement("video");M.src=k.target.result,M.addEventListener("loadedmetadata",async function(){const T=await b(t.file,Math.floor(M.duration));var w=document.createElement("img");w.setAttribute("src",T.url),w.onload=function(){var Y=w.naturalWidth/w.naturalHeight;n.fixedNumber[0]=w.width/w.height;var F=90*Y;let te=Math.floor(960/F),G=Math.floor(M.duration);l.videoTime=G;for(var A=Math.floor(G/(te-1)),R=[],q=0;q<te;q++)R.push(q*A);R[0]==0&&(R[0]=.1),R.forEach(async(D,K)=>{const Z=await b(t.file,D);K==0&&(l.url=Z.url,l.urlTwo=Z.url,l.blob=Z.blob),l.img_list.push(Z.url)}),re(()=>{setTimeout(()=>{r.value=!1},2e3)})}})},S.readAsDataURL(t.file)},u=async S=>{const k=await b(t.file,S);l.url=k.url,l.urlTwo=k.url,l.blob=k.blob},m=S=>{var k=E(S);return k},C=async(S,k)=>{i.value=="two"&&(y.loadings=!0,re(()=>{setTimeout(()=>{y.loadings=!1},500)}))},p=()=>{s("closeDialog",!1)},f=()=>{s("closeDialog",!1),s("confirmImg",{url:l.url,blob:l.blob})},b=(S,k=0)=>new Promise(M=>{const T=document.createElement("video");T.currentTime=k,T.muted=!0,T.autoplay=!0,T.oncanplay=async()=>{const w=await x(T);M(w)},T.src=URL.createObjectURL(S)}),x=S=>new Promise(k=>{const M=document.createElement("canvas"),T=M.getContext("2d");M.width=S.videoWidth,M.height=S.videoHeight,T.drawImage(S,0,0,M.width,M.height),M.toBlob(w=>{k({blob:w,url:URL.createObjectURL(w)})})}),E=S=>{var k=Math.floor(S/3600),M=Math.floor(S%3600/60),T=Math.floor(S%60),w="";return k>0&&(w+=k+":"),w+=M+":"+T,w},y=fe({imgLookUrl:"",bgColor:"rgba(255,255,255,0)",loadings:!0}),z=S=>{y.imgLookUrl=S.html},X=S=>{let k=S.target.files[0];k&&(y.loadings=!0,l.urlTwo=URL.createObjectURL(k),re(()=>{setTimeout(()=>{y.loadings=!1},500)}))},O=()=>{h.value.getCropData(S=>{const k=new Image;k.src=S,k.onload=()=>{const M=document.createElement("canvas"),T=M.getContext("2d");M.width=k.width,M.height=k.height,T.drawImage(k,0,0,M.width,M.height),M.toBlob(w=>{s("closeDialog",!1),s("confirmImg",{url:URL.createObjectURL(w),blob:w})})}})};return(S,k)=>{const M=qo,T=Mt,w=Et,Y=Ve,F=wo,te=St,G=_t;return L(),I("div",null,[N(te,{"model-value":c(t).isShow,title:"","close-on-click-modal":!1,width:"1000px",class:"dialog-dfl","before-close":p},{footer:U(()=>[g("span",ks,[ie(N(Y,{color:"#fe3355",onClick:f},{default:U(()=>[le(" 确认封面 ")]),_:1},512),[[me,i.value=="one"]]),ie(g("div",_s,[g("div",Ss,[N(Y,{style:{"margin-right":"10px",position:"relative"}},{default:U(()=>[Ms,g("input",{type:"file",id:"img-file",accept:"image/*",onChange:X},null,32)]),_:1}),N(F,{locale:"zhCn",modelValue:y.bgColor,"onUpdate:modelValue":k[2]||(k[2]=A=>y.bgColor=A),"show-alpha":""},null,8,["modelValue"])]),g("div",Es,[N(Y,{color:"#fe3355",onClick:O},{default:U(()=>[le(" 确认封面 ")]),_:1})])],512),[[me,i.value=="two"]])])]),default:U(()=>[g("div",null,[N(w,{modelValue:i.value,"onUpdate:modelValue":k[1]||(k[1]=A=>i.value=A),class:"demo-tabs",onTabChange:C},{default:U(()=>[N(T,{label:"封面截取",name:"one"},{default:U(()=>[ie((L(),I("div",us,[ie(g("div",null,[g("div",ds,[g("img",{src:l.url,alt:""},null,8,ps)]),g("div",fs,[g("div",ms,[(L(!0),I(ve,null,Se(l.img_list,(A,R)=>(L(),I("div",{key:R,class:"imgs_item"},[g("img",{src:A,alt:""},null,8,gs)]))),128)),g("div",vs,[N(M,{modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),step:.1,min:0,max:l.videoTime,placement:"bottom","format-tooltip":m,onChange:u},null,8,["modelValue","max"])])])])],512),[[me,!r.value]])])),[[G,r.value]])]),_:1}),N(T,{label:"本地上传",name:"two"},{default:U(()=>[ie((L(),I("div",bs,[y.loadings?Q("",!0):(L(),I("div",ws,[g("div",ys,[g("div",{innerHTML:y.imgLookUrl,style:j({backgroundColor:y.bgColor})},null,12,Cs)]),g("div",xs,[N(c(cs),{ref_key:"cropperRef",ref:h,img:l.urlTwo,outputSize:n.outputSize,outputType:n.outputType,info:n.info,canScale:n.canScale,autoCrop:n.autoCrop,autoCropWidth:n.autoCropWidth,autoCropHeight:n.autoCropHeight,fixedBox:n.fixedBox,fixed:n.fixed,fixedNumber:n.fixedNumber,canMove:n.canMove,canMoveBox:n.canMoveBox,original:n.original,centerBox:n.centerBox,infoTrue:n.infoTrue,full:n.full,enlarge:n.enlarge,mode:n.mode,fillColor:y.bgColor,onRealTime:z},null,8,["img","outputSize","outputType","info","canScale","autoCrop","autoCropWidth","autoCropHeight","fixedBox","fixed","fixedNumber","canMove","canMoveBox","original","centerBox","infoTrue","full","enlarge","mode","fillColor"])])]))])),[[G,y.loadings]])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["model-value"])])}}},$s=ft(Os,[["__scopeId","data-v-55dfce27"]]),Ls=e=>(mt("data-v-1abb5d4e"),e=e(),gt(),e),Hs={class:"box"},Vs={key:0,class:"input-div"},Ws=Ls(()=>g("span",null,"视频名称：",-1)),Is=["src"],Xs={key:2,class:"look_img cursor-zoom-in"},Ts=["src"],Ys={class:"btns"},Ns=ee({__name:"index",setup(e){const o=Yt(),s=Nt(),t=fe({videoUrl:"",file:{},comIsShow:!1,name:"",type:"",id:""}),r=W(""),i=W({}),a=p=>{let f=p.target.files[0];f&&(t.videoUrl=URL.createObjectURL(f),t.file=f,t.name||(t.name=f.name),t.type=f.type,h(f))},h=p=>{let f=document.createElement("video");f.src=URL.createObjectURL(p),f.onloadedmetadata=function(){f.currentTime=1,f.onseeked=function(){let b=document.createElement("canvas");b.width=f.videoWidth,b.height=f.videoHeight,b.getContext("2d").drawImage(f,0,0,b.width,b.height);let x=document.createElement("img");x.src=b.toDataURL("image/jpeg"),r.value=x.src,b.toBlob(E=>{i.value=new File([E],"cover.jpeg",{type:"image/jpeg"})})}}},l=async p=>Promise.resolve(kt.get(p,{responseType:"blob"}).then(f=>{let b=f.data.type.split("/")[1];return new File([f.data],t.name+"."+b,{type:f.data.type})})),n=()=>{t.comIsShow=!0},d=()=>{t.comIsShow=!1},u=p=>{r.value=p.url,i.value=new File([p.blob],"cover.jpeg",{type:p.blob.type})},m=async()=>{if(!t.name){ke.error("请填写视频名称");return}if(!t.file){ke.error("请选择视频文件");return}if(t.id){const p=new FormData;p.append("id",t.id),p.append("name",t.name),p.append("file",t.file),i.value&&p.append("coverFile",i.value),await At(p)}else{const p=new FormData;p.append("name",t.name),p.append("file",t.file),i.value&&p.append("coverFile",i.value),await zt(p)}ke.success("操作成功"),C()},C=()=>{s.push({path:"/file/video"})};return ye(()=>{o.query.id&&Pt(o.query.id).then(async p=>{t.videoUrl={}.VITE_PREVIEW_URL+p.data.path,t.name=p.data.name,t.id=p.data.id,r.value={}.VITE_PREVIEW_URL+p.data.cover,i.value=await l(r.value),t.file=await l(t.videoUrl)})}),(p,f)=>{const b=ct,x=Ve,E=Bt("viewer");return L(),I("div",Hs,[t.videoUrl?(L(),I("div",Vs,[Ws,N(b,{modelValue:t.name,"onUpdate:modelValue":f[0]||(f[0]=y=>t.name=y),class:"input-name"},null,8,["modelValue"])])):Q("",!0),t.videoUrl?(L(),I("video",{key:1,class:"videos",controls:"",src:t.videoUrl},null,8,Is)):Q("",!0),r.value?ie((L(),I("div",Xs,[g("img",{src:r.value,alt:""},null,8,Ts)])),[[E]]):Q("",!0),g("div",Ys,[N(x,{size:"large",class:"button"},{default:U(()=>[le(" 选择视频文件 "),g("input",{type:"file",id:"video-file",accept:"video/*",onChange:a},null,32)]),_:1}),N(x,{size:"large",color:"#fe3355",onClick:n},{default:U(()=>[le(" 提取封面 ")]),_:1}),N(x,{size:"large",onClick:C},{default:U(()=>[le(" 关闭 ")]),_:1}),N(x,{size:"large",type:"primary",onClick:m},{default:U(()=>[le(" 保存 ")]),_:1})]),N($s,{isShow:t.comIsShow,file:t.file,onCloseDialog:d,onConfirmImg:u},null,8,["isShow","file"])])}}});const oi=ft(Ns,[["__scopeId","data-v-1abb5d4e"]]);export{oi as default};
