import{L as B}from"./el-button-534f93ec.js";import{E as C}from"./el-overlay-56edc591.js";/* empty css                */import{E as D,a as N}from"./el-col-af40c86f.js";import{E as U}from"./el-input-number-9046f3aa.js";import{d as z,n as L,f as R,o as Z}from"./admin-d15e446e.js";import"./el-popper-5f9a363e.js";import{E as q}from"./el-tree-select-4038975f.js";import{u as F,a as P,b as S,g as $}from"./index-3931c74b.js";import{a as M}from"./index-b7dce1f7.js";import{d as O,r as n,y as j,x as G,B as t,E as H,k as e,ay as _}from"./viewer-71a6cc7b.js";const J={class:"dialog-footer"},ne=O({__name:"dataDialog",emits:["getPageList"],setup(K,{expose:g,emit:v}){const V=v,i=n(),s=n(!1),d=n(),l=n({}),p=n([]),b=n({name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"change"}],email:[{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,message:"请输入正确的邮箱",trigger:"change"}]}),E=()=>{s.value=!1},y=()=>{var o;(o=d.value)==null||o.validate(async a=>{a&&(l.value.id?await F(l.value):await P(l.value),s.value=!1,z.success("操作成功"),V("getPageList"))})},k=async o=>{if(w(),o!=null&&o.id){const a=await S(o.id);l.value={...a.data},i.value="修改图册",s.value=!0}else l.value={parentId:o==null?void 0:o.parentId},i.value="新增图册",s.value=!0},w=async()=>{const o=await $({pageNum:1,pageSize:1e3});p.value=M([...o.data.list,{id:"0",name:"根"}])||[]};return g({openDialog:k}),(o,a)=>{const x=q,u=L,m=D,c=R,I=U,A=N,h=Z,f=B,T=C;return j(),G(T,{title:i.value,modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=r=>s.value=r),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[H("div",J,[e(f,{onClick:E},{default:t(()=>[_("取 消")]),_:1}),e(f,{type:"primary",onClick:y},{default:t(()=>[_("保 存")]),_:1})])]),default:t(()=>[e(h,{ref_key:"formRef",ref:d,model:l.value,rules:b.value,"label-width":"auto"},{default:t(()=>[e(A,null,{default:t(()=>[e(m,{span:24},{default:t(()=>[e(u,{label:"上级图册：",prop:"parentId"},{default:t(()=>[e(x,{modelValue:l.value.parentId,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value.parentId=r),data:p.value,props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"选择上级图册","check-strictly":"",filterable:"","render-after-expand":!1,class:"w-full"},null,8,["modelValue","data"])]),_:1})]),_:1}),e(m,{span:12},{default:t(()=>[e(u,{label:"图册名称：",prop:"name"},{default:t(()=>[e(c,{modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value.name=r),placeholder:"请输入图册名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:t(()=>[e(u,{label:"排序：",prop:"sort"},{default:t(()=>[e(I,{modelValue:l.value.sort,"onUpdate:modelValue":a[2]||(a[2]=r=>l.value.sort=r),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:24},{default:t(()=>[e(u,{label:"备注：",prop:"remark"},{default:t(()=>[e(c,{modelValue:l.value.remark,"onUpdate:modelValue":a[3]||(a[3]=r=>l.value.remark=r),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{ne as _};
