import{K as U}from"./el-button-fb691484.js";import{E as B}from"./el-overlay-9e31ebb7.js";/* empty css                */import{E as C}from"./el-input-number-aa0bf63c.js";import{r as i,d as D,f as I,j as L,A as q,z as N,k as F}from"./admin-ee59f3a1.js";import"./el-popper-17f91b7a.js";import{d as G,r as m,y as R,x as j,B as n,E as z,k as t,ay as g}from"./viewer-97ef37b1.js";const p="/permission";function A(o){return i({url:p,method:"get",params:{id:o}})}function ee(o){return i({url:`${p}/page`,method:"post",data:o})}function K(o){return i({url:p,method:"post",data:o})}function M(o){return i({url:p,method:"put",data:o})}function le(o){return i({url:p,method:"delete",params:{id:o}})}const $={class:"dialog-footer"},te=G({__name:"dataDialog",emits:["getPageList"],setup(o,{expose:h,emit:P}){const E=P,c=m(),s=m(!1),f=m(),e=m({}),V=m({name:[{required:!0,message:"请输入名称",trigger:"change"}],path:[{required:!0,message:"请输入接口标识",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"change"}]}),b=()=>{s.value=!1},T=()=>{var l;(l=f.value)==null||l.validate(async a=>{a&&(e.value.id?await M(e.value):await K(e.value),s.value=!1,D.success("操作成功"),E("getPageList"))})},y=async l=>{if(l!=null&&l.id){const a=await A(l.id);e.value={...a.data},c.value="修改接口",s.value=!0}else e.value={parentId:(l==null?void 0:l.parentId)||0,parentPath:(l==null?void 0:l.parentPath)||""},c.value="新增接口",s.value=!0},k=l=>{l==="==POST"&&(e.value.path=e.value.parentPath+l,e.value.name="新增"),l==="==PUT"&&(e.value.path=e.value.parentPath+l,e.value.name="修改"),l==="==DELETE"&&(e.value.path=e.value.parentPath+l,e.value.name="删除"),l==="/page==POST"&&(e.value.path=e.value.parentPath+l,e.value.name="列表查询"),l==="==GET"&&(e.value.path=e.value.parentPath+l,e.value.name="单条查询"),l==="/tree==POST"&&(e.value.path=e.value.parentPath+l,e.value.name="树查询")};return h({openDialog:y}),(l,a)=>{const v=I,d=L,r=q,O=N,w=C,x=F,_=U,S=B;return R(),j(S,{title:c.value,modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=u=>s.value=u),width:"500px","close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[z("div",$,[t(_,{onClick:b},{default:n(()=>[g("取 消")]),_:1}),t(_,{type:"primary",onClick:T},{default:n(()=>[g("保 存")]),_:1})])]),default:n(()=>[t(x,{ref_key:"formRef",ref:f,model:e.value,rules:V.value,"label-width":"auto"},{default:n(()=>[t(d,{label:"接口名称：",prop:"name"},{default:n(()=>[t(v,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=u=>e.value.name=u),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(d,{label:"接口标识：",prop:"path"},{default:n(()=>[t(v,{modelValue:e.value.path,"onUpdate:modelValue":a[1]||(a[1]=u=>e.value.path=u),placeholder:"请输入标识"},null,8,["modelValue"])]),_:1}),t(d,{label:"接口种类：",prop:"type"},{default:n(()=>[t(O,{modelValue:e.value.type,"onUpdate:modelValue":a[2]||(a[2]=u=>e.value.type=u),onChange:k},{default:n(()=>[t(r,{label:"新增",value:"==POST"}),t(r,{label:"修改",value:"==PUT"}),t(r,{label:"删除",value:"==DELETE"}),t(r,{label:"列表查询",value:"/page==POST"}),t(r,{label:"单条查询",value:"==GET"}),t(r,{label:"树查询",value:"/tree==POST"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"排序：",prop:"sort"},{default:n(()=>[t(w,{modelValue:e.value.sort,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value.sort=u),min:0,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{te as _,le as d,ee as g};
